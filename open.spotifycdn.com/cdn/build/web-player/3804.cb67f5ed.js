"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[3804],{89520:(e,t,r)=>{r.d(t,{u:()=>S});var i=r(96651),a=r(12100),n=r(44488),l=r(81604),o=r(47724),s=r(97120),d=r(43619),c=r(88548),u=r(25272),p=r(65856),g=r(35044),y=r(90484),m=r(13932),x=r(3844),b=r(4732),h=r(2488);const f=i.memo((function(e){let{uri:t,divider:r,removeLabel:a}=e;const n=(0,p.OY)(),o=!(0,m.O)(),s=(0,x.u)(),d=(0,i.useCallback)((async()=>{n((0,b.ED)(t))}),[n,t]);return(0,h.jsx)(l.oL,{value:"save-track",children:(0,h.jsx)(y.I,{role:"menuitem",divider:r,disabled:o&&!(null!=s&&s.getCapabilities().canModifyOffline),onClick:d,leadingIcon:(0,h.jsx)(g.W,{semanticColor:"textBrightAccent",size:"small"}),children:a})})})),S=i.memo((function(e){let{uri:t,artistUri:r,canPin:i=o.yu.NO,isPinned:p=!1,canRemove:g=!1}=e;const{spec:y}=(0,s.A)(t);return(0,h.jsx)(l.oL,{value:"album",children:(0,h.jsxs)(n.i,{children:[g&&(0,h.jsx)(f,{uri:t,removeLabel:a._s.get("contextmenu.remove-from-library")}),r&&(0,h.jsx)(c.qq,{spec:y,divider:"after",uri:r,displayText:a._s.get("contextmenu.go-to-artist-radio")}),i!==o.yu.NO&&(0,h.jsx)(u.e,{uri:t,canPin:i,isPinned:p,type:d.s.PRE_RELEASE,spec:y}),(0,h.jsx)(c.wZ,{uri:t,spec:y,displayText:a._s.get("context-menu.copy-album-link")}),(0,h.jsx)(c.sh,{spec:y,divider:"before",uri:t})]})})}))},27824:(e,t,r)=>{r.d(t,{u:()=>l});var i=r(34716);const a="fRZRXRIV2YBCFLYgwDAr";var n=r(2488);const l=e=>{let{iconSize:t=64,...r}=e;return(0,n.jsx)("div",{className:a,children:(0,n.jsx)(i.d,{iconSize:t,...r,semanticColor:"textBrightAccent","aria-hidden":!0})})}},51424:(e,t,r)=>{r.d(t,{c:()=>pn,YourLibraryX:()=>kl,a:()=>gn});r(83956),r(88208),r(73952),r(97296),r(41260);var i=r(96651),a=r(10124),n=r.n(a),l=r(19240),o=r(65856),s=r(18648),d=r(71796),c=r(49232),u=r(50940),p=r(87832),g=r(44488),y=r(81604),m=r(47724),x=r(97120),b=r(88548),h=r(2488);const f=i.memo((function(e){let{folderUri:t,onCreateCallback:r}=e;const i=t?{after:{uri:t}}:{before:"start"},{spec:a}=(0,x.A)(t??m.k1);return(0,h.jsx)(y.oL,{value:"folder",children:(0,h.jsxs)(g.i,{children:[(0,h.jsx)(b.Cq,{position:i,onCreateCallback:r,spec:a}),(0,h.jsx)(b.Sc,{position:i,onCreateCallback:r,spec:a})]})})}));var S=r(73670),v=r(49404),w=r.n(v),C=r(8708),T=r(66364),P=r(97876),I=r(44772),D=r(93948),A=r(43619);var j=r(47300),L=r(11816),O=r(35132),_=r(53044),k=r(87668);r(10216),r(58032),r(78924),r(99696),r(63120),r(72248),r(1384),r(41256);const R=new Set(["Unidentified","Alt","AltGraph","CapsLock","Control","Fn","FnLock","Meta","NumLock","ScrollLock","Shift","Symbol","SymbolLock","Hyper","Super","Enter","Tab","ArrowDown","ArrowLeft","ArrowRight","ArrowUp","End","Home","PageDown","PageUp","Backspace","Clear","Copy","CrSel","Cut","Delete","EraseEof","ExSel","Insert","Paste","Redo","Undo","Accept","Again","Attn","Cancel","ContextMenu","Escape","Execute","Find","Help","Pause","Play","Props","Select","ZoomIn","ZoomOut","BrightnessDown","BrightnessUp","Eject","LogOff","Power","PowerOff","PrintScreen","Hibernate","Standby","WakeUp","AllCandidates","Alphanumeric","CodeInput","Compose","Convert","Dead","FinalMode","GroupFirst","GroupLast","GroupNext","GroupPrevious","ModeChange","NextCandidate","NonConvert","PreviousCandidate","Process","SingleCandidate","HangulMode","HanjaMode","JunjaMode","Eisu","Hankaku","Hiragana","HiraganaKatakana","KanaMode","KanjiMode","Katakana","Romaji","Zenkaku","ZenkakuHankaku","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","Soft1","Soft2","Soft3","Soft4","ChannelDown","ChannelUp","Close","MailForward","MailReply","MailSend","MediaClose","MediaFastForward","MediaPause","MediaPlay","MediaPlayPause","MediaRecord","MediaRewind","MediaStop","MediaTrackNext","MediaTrackPrevious","New","Open","Print","Save","SpellCheck","Key11","Key12","AudioBalanceLeft","AudioBalanceRight","AudioBassBoostDown","AudioBassBoostToggle","AudioBassBoostUp","AudioFaderFront","AudioFaderRear","AudioSurroundModeNext","AudioTrebleDown","AudioTrebleUp","AudioVolumeDown","AudioVolumeUp","AudioVolumeMute","MicrophoneToggle","MicrophoneVolumeDown","MicrophoneVolumeUp","MicrophoneVolumeMute","SpeechCorrectionList","SpeechInputToggle","LaunchApplication1","LaunchApplication2","LaunchCalendar","LaunchContacts","LaunchMail","LaunchMediaPlayer","LaunchMusicPlayer","LaunchPhone","LaunchScreenSaver","LaunchSpreadsheet","LaunchWebBrowser","LaunchWebCam","LaunchWordProcessor","BrowserBack","BrowserFavorites","BrowserForward","BrowserHome","BrowserRefresh","BrowserSearch","BrowserStop","AppSwitch","Call","Camera","CameraFocus","EndCall","GoBack","GoHome","HeadsetHook","LastNumberRedial","Notification","MannerMode","VoiceDial","TV","TV3DMode","TVAntennaCable","TVAudioDescription","TVAudioDescriptionMixDown","TVAudioDescriptionMixUp","TVContentsMenu","TVDataService","TVInput","TVInputComponent1","TVInputComponent2","TVInputComposite1","TVInputComposite2","TVInputHDMI1","TVInputHDMI2","TVInputHDMI3","TVInputHDMI4","TVInputVGA1","TVMediaContext","TVNetwork","TVNumberEntry","TVPower","TVRadioService","TVSatellite","TVSatelliteBS","TVSatelliteCS","TVSatelliteToggle","TVTerrestrialAnalog","TVTerrestrialDigital","TVTimer","AVRInput","AVRPower","ColorF0Red","ColorF1Green","ColorF2Yellow","ColorF3Blue","ColorF4Grey","ColorF5Brown","ClosedCaptionToggle","Dimmer","DisplaySwap","DVR","Exit","FavoriteClear0","FavoriteClear1","FavoriteClear2","FavoriteClear3","FavoriteRecall0","FavoriteRecall1","FavoriteRecall2","FavoriteRecall3","FavoriteStore0","FavoriteStore1","FavoriteStore2","FavoriteStore3","Guide","GuideNextDay","GuidePreviousDay","Info","InstantReplay","Link","ListProgram","LiveContent","Lock","MediaApps","MediaAudioTrack","MediaLast","MediaSkipBackward","MediaSkipForward","MediaStepBackward","MediaStepForward","MediaTopMenu","NavigateIn","NavigateNext","NavigateOut","NavigatePrevious","NextFavoriteChannel","NextUserProfile","OnDemand","Pairing","PinPDown","PinPMove","PinPToggle","PinPUp","PlaySpeedDown","PlaySpeedReset","PlaySpeedUp","RandomToggle","RcLowBattery","RecordSpeedNext","RfBypass","ScanChannelsToggle","ScreenModeNext","Settings","SplitScreenToggle","STBInput","STBPower","Subtitle","Teletext","VideoModeNext","Wink","ZoomToggle"]);function F(e,t){const[r,a]=(0,i.useState)(""),n=(0,i.useRef)(r);n.current=r;const l=(0,i.useRef)(null);return(0,i.useEffect)((()=>{const r=e.current;if(!r||!t)return a(""),()=>{};const i=e=>{var t;const r="Backspace"===e.key,i=" "===e.key,o=e.metaKey||e.ctrlKey,s=e.target instanceof HTMLElement&&(null===(t=e.target)||void 0===t?void 0:t.matches("input, textarea, [contenteditable]")),d=e.isComposing||229===e.keyCode,c=(u=e.key,R.has(u)&&!r);var u;const p=i&&!n.current,g=r&&!n.current;if(o||s||d||c||p||g)return;(r&&n.current||i)&&(e.preventDefault(),e.stopPropagation()),a((t=>r?t.slice(0,-1):t+e.key)),l.current&&clearTimeout(l.current),l.current=setTimeout((()=>a("")),1e3)};return r.addEventListener("keydown",i,!0),()=>{r.removeEventListener("keydown",i,!0),l.current&&clearTimeout(l.current)}}),[e,t]),r}const E=(0,i.createContext)({setTypeaheadResult:e=>{let{uid:t,str:r}=e;if(t||r)throw new Error("setTypeaheadResult must be used within a TypeaheadProvider")},typeaheadResult:{uid:null,str:""}}),M=e=>{let{children:t,containerRef:r,findMatchingTypeaheadUid:a,isEnabled:n=!0}=e;const[l,o]=(0,i.useState)({uid:null,str:""}),s=(0,i.useMemo)((()=>({typeaheadResult:l,setTypeaheadResult:o})),[l,o]),d=F(r,n),c=(0,i.useRef)(d);c.current=d;const u=(0,i.useRef)(a);return u.current=a,(0,i.useEffect)((()=>{d&&n?u.current(d).then((e=>{d===c.current&&o({uid:e,str:d})})):o({uid:null,str:""})}),[n,d,o]),(0,h.jsx)(E.Provider,{value:s,children:t})},N="Vf3ww2_My5QuwUnbpzhu";var B=r(44776);const U=()=>{const{typeaheadResult:{str:e}}=(0,i.useContext)(E);return e?(0,h.jsx)(B.wR,{className:N,children:e}):null};var V=r(40636),Y=r(8004),W=r(21212),H=r(12100),K=r(85988),G=r(11732);const z="rLYEzyB9ic23aMurRbCh",X="NDD4b43wDJs8ZEk8nE0N",q="/preferences",Q=e=>{let{spec:t}=e;const r=(0,P.aM)(),a=(0,V.Mk)(),n=H._s.get("web-player.your-library-x.dsa-message",H._s.get("web-player.your-library-x.dsa-message-link")),l=(0,i.useCallback)((()=>{a.logInteraction(t.dsaMessageSettingsLinkFactory().hitUiNavigate({destination:q}))}),[a,t]);return(0,h.jsx)("div",{className:z,children:r?(0,h.jsx)(K.Yl,{label:(0,h.jsx)(Y.a,{children:n}),placement:"right",showDelay:0,children:(0,h.jsx)("div",{className:X,children:(0,h.jsx)(W.i,{"aria-label":n})})}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{children:(0,h.jsx)(W.i,{size:"small"})}),(0,h.jsx)(Y.a,{as:"p",semanticColor:"textSubdued",children:H._s.get("web-player.your-library-x.dsa-message",(0,h.jsx)(G.default,{to:q,onClick:l,search:"?highlight=dsa",children:H._s.get("web-player.your-library-x.dsa-message-link")}))})]})})},J="wW9brXu3G3dR9CQ77Tyk",Z="sgpkGFrp4dcnre_TJtaI",$=e=>{let{className:t}=e;return(0,h.jsx)("section",{className:n()(J,t),children:(0,h.jsxs)("div",{className:Z,children:[(0,h.jsx)(Y.a,{as:"h2",variant:"titleSmall",semanticColor:"textBase",children:H._s.get("web-player.your-library-x.empty-state-folder-title")}),(0,h.jsx)(Y.a,{as:"p",variant:"bodySmall",semanticColor:"textBase",children:H._s.get("web-player.your-library-x.empty-state-folder-subtitle")})]})})};var ee=r(85712),te=r(31168),re=r(97192);const ie="xi3ytXbuSuzCYy5LwjFu",ae="OcOr6YadMDDeh_NPgClX",ne="eL94fWmhg6WbrdKZfGEW",le=(0,i.memo)((function(e){const{message:t,title:r,linkTitle:i,linkTo:a,onClick:l,className:o}=e;return(0,h.jsxs)("section",{className:n()(ie,o),children:[(0,h.jsxs)("div",{className:ae,children:[(0,h.jsx)(Y.a,{variant:"bodyMediumBold",semanticColor:"textBase",children:r}),(0,h.jsx)(Y.a,{variant:"bodySmall",semanticColor:"textBase",children:t})]}),(0,h.jsx)("div",{className:ne,children:i&&(a||l)&&(0,h.jsx)(te.g,{className:ne,as:l?"button":void 0,colorSet:"invertedLight",href:a,onClick:l,component:re.m,size:"small",children:i})})]})}));var oe=r(63804);const se=e=>{let{className:t}=e;const{createPlaylist:r}=(0,ee.c)(),a=(0,i.useCallback)((()=>{r()}),[r]);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(oe.aV,{renderInline:!1,children:(0,h.jsx)(le,{onClick:a,linkTitle:H._s.get("web-player.your-library-x.empty-state-playlists-cta"),title:H._s.get("web-player.your-library-x.empty-state-playlists-title"),message:H._s.get("web-player.your-library-x.empty-state-playlists-subtitle"),className:t})}),(0,h.jsx)(le,{linkTo:"/genre/podcasts-web",linkTitle:H._s.get("web-player.your-library-x.empty-state-podcasts-browse"),title:H._s.get("web-player.your-library-x.empty-state-podcasts-to-follow"),message:H._s.get("web-player.your-library-x.empty-state-podcasts-keep-you-updated"),className:t})]})},de="JouuH90_RNAdTj0ZjcCA",ce="YtlFVHxvaGSz4vJdDdEa",ue="spFG_i1jkxOkxb1_SaLJ",pe="_8ZKfG3dOxfcr9Yyy5cv",ge=e=>{let{query:t,className:r}=e;return(0,h.jsxs)("div",{className:n()(de,r),"data-testid":"no-search-results-view",children:[(0,h.jsx)(Y.a,{as:"h1",variant:"bodyMediumBold",className:ce,children:H._s.get("web-player.your-library-x.empty-results-title-short",(0,h.jsx)("span",{className:ue,children:(0,h.jsx)("span",{className:pe,children:t})}))}),(0,h.jsx)(Y.a,{as:"h2",variant:"bodySmall",children:H._s.get("web-player.your-library-x.empty-results-text-short")})]})};var ye=r(99070);const me="yrUQENj0tMcKDW5v0mfb",xe="jsT0vJ8rWXPMeoFsMdNK",be=e=>{let{onClick:t}=e;return(0,h.jsxs)("div",{className:me,children:[(0,h.jsx)("div",{className:"icon",children:(0,h.jsx)(ye.x,{size:"xlarge",semanticColor:"textBase"})}),(0,h.jsxs)("div",{className:xe,children:[(0,h.jsx)(Y.a,{as:"h2",variant:"titleSmall",semanticColor:"textBase",children:H._s.get("web-player.your-library-x.error-title")}),(0,h.jsx)(Y.a,{as:"p",variant:"bodySmall",semanticColor:"textBase",children:H._s.get("web-player.your-library-x.error-body")})]}),(0,h.jsx)("div",{children:(0,h.jsx)(te.g,{onClick:t,colorSet:"invertedLight",size:"small",children:H._s.get("web-player.your-library-x.error-button")})})]})},he=(0,i.createContext)(null);r(76376);var fe=r(37116);const Se=e=>{let{children:t}=e;const r=function(){const[e,t]=(0,fe.k)("ylx-expanded-folders",[]),r=(0,i.useCallback)((t=>e.includes(t)),[e]),a=(0,i.useCallback)(((r,i)=>{const a=e.indexOf(r);if(i){if(-1!==a)return;t([...e,r])}else{if(-1===a)return;t(e.filter((e=>e!==r)))}}),[e,t]);return{expandedFolders:e,getIsFolderExpanded:r,setIsFolderExpanded:a}}();return(0,h.jsx)(he.Provider,{value:r,children:t})},ve="ojrThQm1wxR2gZ6GntJB",we="Dtr130mQSR0j8k7bu5KS",Ce="Ks_qLLEMUQzP7ejeQCwQ",Te="o_wMyH9_LbAmIwlVqsF0",Pe="vR1zUcAr6PBeHIvA_K13",Ie="TiJahFhH6KZaibhRtEOA",De="B_HdWVSEWPHaOf9LQAtC",Ae="Pns6F5g4OEwEpdmOWTLg",je="gOCoOAfYUiOq2RlMCOjr",Le="eldivguzYznZgQoShJbe",Oe="rTLczxlwElfe8CeNpuh6",_e="_XBlEstA77PgWTJzWbe1",ke="pFmiujkSoJU4nVLZNO32",Re="raKUx1vRBRjpm8xR2bIV",Fe="jNqzRycGQMLmnhgQNqxy",Ee="Q955MS3fMIZGQAtvDYCq",Me="cVy6fGx6QtJbCnID7XdB",Ne="qEiVyQ28VnOKb0LeijqL",Be="IKhOc8pMvjcJEY5EP8GW",Ue=e=>{let{isScrolled:t}=e;return(0,h.jsxs)("div",{className:n()(_e,Re,{[Fe]:t}),children:[(0,h.jsx)(Y.a,{variant:"marginalBold",semanticColor:"textSubdued",children:H._s.get("web-player.your-library-x.expanded-list-header.title")}),(0,h.jsx)(Y.a,{variant:"marginalBold",semanticColor:"textSubdued",children:H._s.get("web-player.your-library-x.expanded-list-header.date-added")}),(0,h.jsx)(Y.a,{variant:"marginalBold",semanticColor:"textSubdued",children:H._s.get("web-player.your-library-x.expanded-list-header.played-at")})]})};var Ve=r(2324),Ye=r(16632),We=r(21396),He=r(5244),Ke=r(3844),Ge=r(84152);const ze="oLOECYtBhVmBtyisKwew",Xe="as7TWnIA1jnumFte_u0R",qe="tXkgloQ88DHF_inQE69J",Qe="g581mszC8syz99uMMWsr",Je="V57QBvW1q79gFmT8NBvz",Ze={marginBlockEnd:0,willChange:"transform, opacity"},$e=e=>{let{filterId:t,isPrimaryFilter:r,isPlaceholder:a,resetFilterIds:l,toggleFilterId:o,allowedDropTargetMimeTypes:s=Ge.qq,className:d,ChipComponent:c=He.a,innerRef:u,index:p=0,spec:g,...y}=e;const m=(0,V.Mk)(),x=(0,Ke.u)(),b=y.selected,f=t?x.getFilterLabel(t):"",S=(0,i.useCallback)((()=>{!t||b&&r?(l(),b&&r&&t?m.logInteraction(g.filterChipFactory({identifier:f,position:p}).hitClearFilter()):m.logInteraction(g.clearButtonFactory().hitClearFilter())):(o(t),b?m.logInteraction(g.filterChipFactory({identifier:f,position:p}).hitClearFilter()):m.logInteraction(g.filterChipFactory({identifier:f,position:p}).hitFilter()))}),[t,f,b,r,l,o,p,m,g]),v=(0,i.useCallback)((e=>{e.detail>1||a||S()}),[a,S]),{className:w,dropPosition:C,...T}=(0,Ge.eE)({allowedMimeTypesByDropPosition:{[Ge.Ab.ON]:s},onLongDragOver:S});return(0,h.jsx)(c,{...y,"aria-label":y["aria-label"],...T,...C===Ge.Ab.ON?{selectedColorSet:"base"}:void 0,className:n()(d,w,{[Xe]:C===Ge.Ab.ON,[Je]:a}),onClick:v,selectedColorSet:C===Ge.Ab.ON?"invertedDark":"invertedLight",secondary:b&&!r,style:Ze,ref:u,tabIndex:-1})},et=[{id:"p1",name:"Playlists"},{id:"p2",name:"Podcasts & Shows"},{id:"p3",name:"Artists"},{id:"p4",name:"Albums"}],tt=(0,i.memo)((function(e){let{availableFilters:t,selectedFilters:r,toggleFilterId:a,resetFilterIds:n,className:l,spec:o}=e;const s=!(r||t),d=s?et:[...r??[],...t??[]],c=(0,i.useRef)(null),u=(0,i.useCallback)((()=>{var e,t;(0,We.BA)(c.current,(null===(e=c.current)||void 0===e?void 0:e.nextElementSibling)instanceof HTMLElement?null===(t=c.current)||void 0===t?void 0:t.nextElementSibling:null),n()}),[n]);return 0===d.length?null:(0,h.jsxs)(Ye.E,{className:l,ariaLabel:H._s.get("web-player.your-library-x.filter_options"),children:[!(null==r||!r.length)&&(0,h.jsx)($e,{resetFilterIds:u,toggleFilterId:a,allowedDropTargetMimeTypes:Ll,ChipComponent:Ve.E,"aria-label":H._s.get("web-player.your-library-x.clear_filters"),innerRef:c,spec:o}),d.map(((e,t)=>{const i=null==r?void 0:r.includes(e),l=0===t;return(0,h.jsx)($e,{filterId:e.id,isPrimaryFilter:l,isPlaceholder:s,resetFilterIds:n,toggleFilterId:a,selected:i,spec:o,index:t,children:e.name},e.id)}))]})}));var rt=r(78808);const it="",at=(0,i.createContext)({openedFolderUri:it,pushFolder:()=>{},popFolder:()=>{},resetFolder:()=>{},change:"PUSH"}),nt=e=>{let{children:t}=e;const{setFilter:r}=(0,i.useContext)(rt.on),[a,n]=(0,fe.k)("opened-folder-uri",it),l=(0,i.useRef)([a??it]),o=(0,i.useRef)("PUSH"),s=(0,i.useCallback)((e=>{n(e),r(it)}),[n,r]),d=(0,i.useCallback)((e=>{l.current.push(e),o.current="PUSH",s(l.current.at(-1))}),[s]),c=(0,i.useCallback)((()=>{l.current.pop();const e=l.current.at(-1);return o.current="POP",s(e),e}),[s]),u=(0,i.useCallback)((()=>{l.current=[it],s(it)}),[s]);return(0,h.jsx)(at.Provider,{value:{openedFolderUri:a,pushFolder:d,popFolder:c,resetFolder:u,change:o.current},children:t})};var lt=r(53344),ot=r(25620),st=r(26208),dt=r(41660);r(39568);const ct=e=>{let{span:t,onInView:r,marginBottom:a,marginTop:n}=e;const l=(0,i.useRef)(null);return(0,i.useEffect)((()=>{if(!window.IntersectionObserver)return()=>{};const e=new window.IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&r()}))}));return l.current&&e.observe(l.current),()=>{e.disconnect()}}),[r]),t<=0?null:(0,h.jsx)("div",{style:{gridColumn:"1/-1",gridRow:`span ${t}`,marginBottom:a,marginTop:n},ref:l,"data-type":"sentinel"},"topSentinel")},ut=e=>{let{renderItems:t,nrItems:r,estimatedItemMaxHeight:a,scrollNodeRef:n,nrRowsOverscan:l=5,initalNrRows:o=5,onGridResize:s}=e;const[d,c]=(0,i.useState)({firstRowToRender:0,nrRows:o+l}),u=(0,i.useRef)(0),p=(0,i.useRef)(null),g=(0,i.useRef)(a),y=(0,ot.m)(),m=(0,i.useCallback)((()=>{var e;const t=null===(e=p.current)||void 0===e?void 0:e.querySelector(':scope > *:not([data-type="sentinel"])');g.current=t?t.getBoundingClientRect().height+y.COLUMN_GRID_GAP:g.current}),[y]),x=(0,i.useCallback)((()=>{const e=n.current;if(!e)return;m();const t=Math.floor((e.scrollTop-u.current)/g.current),r=Math.max(t-l,0),i=Math.ceil(e.offsetHeight/g.current)+2*l;r===d.firstRowToRender&&i===d.nrRows||c({firstRowToRender:r,nrRows:i})}),[l,d,n,m]),b=(0,i.useCallback)((e=>{let{columnCount:i}=e;if(i<=0)return[null];s&&s(i,g.current);const a=Math.ceil(r/i),n=d.firstRowToRender*i,o=d.firstRowToRender+d.nrRows-1,c=Math.min(r-1,(o+1)*i-1),u=g.current*(l-2);return[(0,h.jsx)(ct,{span:d.firstRowToRender,onInView:x,marginBottom:`-${u}px`},`topSentinel-${d.firstRowToRender}`),t(n,c,i),(0,h.jsx)(ct,{span:a-o,onInView:x,marginTop:`-${u}px`},"bottomSentinel-"+(a-o))]}),[r,l,s,x,t,d]);return(0,i.useEffect)((()=>{const e=p.current,t=n.current;e&&t&&(u.current=e.getBoundingClientRect().top-t.getBoundingClientRect().top+t.scrollTop)}),[n]),(0,h.jsx)(dt.C,{useUniformRowHeight:!0,ref:p,render:b,onLayoutChange:m})};var pt=r(70396),gt=r(52276),yt=r(4732),mt=r(25676),xt=r(86376),bt=r(54076),ht=r(52588),ft=r(94192),St=r(17220),vt=r(19424),wt=r(14788),Ct=r(5472),Tt=r(28080),Pt=r(65368);const It=e=>{let{iconSize:t="small"}=e;return(0,h.jsx)("span",{className:Pe,children:(0,h.jsx)(Pt.Q,{size:t,semanticColor:"textBrightAccent",className:Te})})};var Dt=r(24544);const At=e=>{let{children:t,title:r,subtitleSlot:i,isPlaying:a}=e;const l=(0,c.IP)(Dt.Sw);return(0,h.jsx)(K.Yl,{label:(0,h.jsxs)("div",{className:n()("encore-dark-theme","encore-layout-themes",{"vertical-metrics":l},Oe),children:[(0,h.jsxs)("div",{children:[r,i]}),a&&(0,h.jsx)(It,{})]}),placement:"right",showDelay:0,children:t})},jt=e=>{const t=(0,i.useRef)(null);return(0,lt.gH)(e.uri)?(0,h.jsx)(lt.cr,{parentRef:e.parentRef,api:t,children:(0,h.jsx)(At,{...e})}):(0,h.jsx)(At,{...e})};var Lt=r(67316),Ot=r(6128),_t=r(35870);const kt=e=>{let{leading:t,subtitle:r,uri:i}=e;const a=`listrow-subtitle-${i}`;return(0,h.jsx)("div",{className:_t.c.subtitle,children:(0,h.jsxs)(Lt.A,{lineClamp:1,className:_t.c.link,id:a,dir:"auto",children:[(0,h.jsx)("span",{className:_t.c.subtitleLeadingWrapper,children:t}),r]})})},Rt=e=>{let{leading:t,subtitle:r,uri:i}=e;const a=`card-subtitle-${i}`;return(0,h.jsx)("div",{className:_t.c.subtitle,children:(0,h.jsxs)(Ot.w,{lineClamp:1,className:_t.c.link,id:a,role:"gridcell",dir:"auto",children:[(0,h.jsx)("span",{className:_t.c.subtitleLeadingWrapper,children:t}),r]})})};var Ft=r(33220),Et=r(45008),Mt=r(14868),Nt=r(7300),Bt=r(47824);var Ut=r(54584);const Vt={state:{referrer:"your_library",preventMoveFocus:!0}};function Yt(e,t,r,a){const{filter:n}=(0,i.useContext)(rt.on),{isActive:l}=(0,ft.kP)(e),o=function(e){const{typeaheadResult:{uid:t,str:r}}=(0,i.useContext)(E);return t===e?r:null}(e),s=!!o,d=(0,Bt.W)({uri:e,type:"link"})?(0,Ut.oP)(t):t,c=(0,i.useRef)(null),u=(0,Ft.i6)(),p=(0,i.useCallback)((e=>{e.preventDefault(),a?a():d&&u(d,Vt)}),[a,u,d]);(0,i.useLayoutEffect)((()=>{var e;s&&(null===(e=c.current)||void 0===e||null===(e=e.closest('[role="row"], [role="listitem"]'))||void 0===e||null===(e=e.querySelector("button"))||void 0===e||e.focus({preventScroll:!0}))}),[s]);return{isActive:l,onClick:p,contents:n||o?(0,h.jsx)("span",{ref:c,children:(0,h.jsx)(bt.S,{autoEscape:!0,searchWords:[n.trim(),...(null==o?void 0:o.split(" "))??""],textToHighlight:r})}):r}}const Wt=e=>{var t;let{uri:r,playbackUri:i=r,title:a,menu:l,to:o=(null===(t=(0,wt.nX)(r))||void 0===t?void 0:t.toURLPath(!0))||"",handleNavigate:s}=e;const{isActive:d,contents:c}=Yt(i,o,a,s),u=`listrow-title-${r}`;return(0,h.jsx)(Nt.U,{menu:l,children:(0,h.jsx)(Et.Y,{id:u,lineClamp:1,className:n()(_t.c.link,_t.c.titleLink),semanticColor:d?"textBrightAccent":"textBase",dir:"auto",children:c})})},Ht=e=>{var t;let{uri:r,playbackUri:i=r,title:a,menu:l,to:o=(null===(t=(0,wt.nX)(r))||void 0===t?void 0:t.toURLPath(!0))||"",handleNavigate:s}=e;const{isActive:d,onClick:c,contents:u}=Yt(i,o,a,s);return(0,h.jsx)(Nt.U,{menu:l,children:(0,h.jsx)(Mt.O,{lineClamp:1,className:n()(_t.c.link,_t.c.titleLink),semanticColor:d?"textBrightAccent":"textBase",href:o,onClick:c,role:"gridcell",dir:"auto",children:u})})};var Kt=r(62528),Gt=r(75904),zt=r(75552),Xt=(r(91372),r(16824)),qt=r(79512);const Qt=e=>{let{isConfirmationForPlaylist:t,onConfirm:r,onClose:i}=e;const a=t?H._s.get("web-player.your-library-x.unpin-confirmation-dialog.title-playlist"):H._s.get("web-player.your-library-x.unpin-confirmation-dialog.title-folder");return(0,h.jsx)(qt.c,{"aria-label":a,titleText:a,descriptionText:t?H._s.get("web-player.your-library-x.unpin-confirmation-dialog.message-playlist"):H._s.get("web-player.your-library-x.unpin-confirmation-dialog.message-folder"),onConfirm:r,onClose:i,confirmText:H._s.get("web-player.your-library-x.unpin-confirmation-dialog.confirm-button-text"),confirmLabel:t?H._s.get("web-player.your-library-x.unpin-confirmation-dialog.confirm-button-label-playlist"):H._s.get("web-player.your-library-x.unpin-confirmation-dialog.confirm-button-label-folder"),cancelText:H._s.get("web-player.your-library-x.unpin-confirmation-dialog.cancel-button-text"),allowHTML:!0})};function Jt(e){var t;let{onApplyDrop:r,spec:a,isDropTargetPinned:n}=e;const l=(0,Ke.u)(),{contains:o}=(0,Xt.U)("ylpin"),[s,d]=(0,i.useState)(null),c=(0,i.useCallback)((async(e,t)=>{if(n)return void r(e,t);const{[Kt.__.PLAYLISTS_V2]:i=[],[Kt.__.FOLDERS]:a=[]}=e,l=[...i,...a];if(!!l.length&&(await o(...l)).some(Boolean)){if(l.length>1)throw new Error("Reordering multiple pinned items at once is not supported");d({dropData:e,dropPosition:t})}else r(e,t)}),[n,o,r]),u=(0,V.Mk)();return{applyDropWithUnpinConfirmation:c,unpinConfirmationDialog:s?(0,h.jsx)(Qt,{isConfirmationForPlaylist:!(null!==(t=s.dropData[Kt.__.FOLDERS])&&void 0!==t&&t.length),onClose:()=>d(null),onConfirm:async()=>{const{[Kt.__.PLAYLISTS_V2]:e=[],[Kt.__.FOLDERS]:t=[]}=s.dropData;await l.unpin([...e,...t][0]),null!=a&&a.dragUnpinItem&&u.logInteraction(a.dragUnpinItem({itemToUnpin:[...e,...t][0]})),r(s.dropData,s.dropPosition),d(null)}}):null}}var Zt=r(43460);function $t(){const{dropOriginUri:e,sectionId:t}=(0,i.useContext)(Zt.gT);return{dropOriginIsYLX:e===m.k1,entityIsInFolder:t>0}}function er(){const e=(0,_.Y)(),{dropOriginIsYLX:t}=$t();return(0,i.useCallback)((async(r,i)=>{const a=await e.contains(r);if(1!==new Set(a).size)throw new Error("Dropping a mix of newly added and moved playlists is not supported");if(a[0]){if(r.length>1)throw new Error("Moving multiple playlists at once is not supported");t?await e.move({uri:r[0]},i):await e.move({uri:r[0]},i,!0)}else await e.add(r,i)}),[t,e])}function tr(e){let{dropTargetUri:t,spec:r,isDropTargetPinned:a}=e;const n=(0,_.Y)(),l=(0,i.useContext)(D.g),o=(0,V.Mk)(),s=er(),d=(0,i.useCallback)((async(e,i)=>{const{[Kt.__.PLAYLISTS_V2]:d=[],[Kt.__.FOLDERS]:[c]=[]}=e,u=i===Ge.Ab.BEFORE?{before:{uri:t}}:{after:{uri:t}};if(a){const t=e[Object.keys(e)[0]][0];if((0,wt.mS)(t)||(0,wt.Gm)(t)){const e=rr((await n.getContents()).items,t);-1===e?await n.add([t],{before:"start"}):e>0&&((0,wt.mS)(t)?await n.move({uri:t},{before:"start"}):await n.moveFolder({uri:t},{before:"start"}))}else if(!(0,wt.W8)(t)){const[e]=await l.contains(t);e||await l.add({uris:[t]})}await l.pin(t,u),o.logInteraction(r.dragPinItem({itemToPin:t}))}else c?await n.moveFolder({uri:c},u):d.length&&await s(d,u);o.logInteraction(r.dragSort())}),[t,a,l,o,r,n,s]),{unpinConfirmationDialog:c,applyDropWithUnpinConfirmation:u}=Jt(a?{onApplyDrop:d,spec:r,isDropTargetPinned:a}:{onApplyDrop:d});return{handleDropBeforeOrAfterRootlistItem:(0,i.useCallback)((async(e,t)=>{const{[Kt.__.PLAYLISTS_V2]:r=[],[Kt.__.FOLDERS]:i=[]}=e;if(r.length&&i.length)throw new Error("Dropping a mix of playlists and folders is not supported");if(i.length>1)throw new Error("Dropping multiple folders is not supported");u(e,t)}),[u]),unpinConfirmationDialog:c}}function rr(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;for(const i of e)if((0,zt.Yb)(i)||(0,zt.u4)(i)){if((0,wt.mG)(i.uri,t))return r;if((0,zt.u4)(i)){const e=rr(i.items,t,r+1);if(-1!==e)return e}}return-1}const ir={state:{referrer:"your_library",preventMoveFocus:!0}};function ar(e){var t,r;let{uri:a,to:n=(null===(t=(0,wt.nX)(a))||void 0===t?void 0:t.toURLPath(!0))||"",type:l,handleNavigate:o,dragLabel:s,isPinned:d,canReorder:c,allowedDropTargetDropOnMimeTypes:u=[],onDropTargetDropOn:p,onLongDragOver:g,openDeleteDialog:y,togglePlay:x,isItemInGrid:b,playInsteadOfNavigating:h=!1,isPlaying:f,isActive:S,spec:v,folderDepth:w}=e;const C=(0,Bt.W)({uri:a,type:"link"})?(0,Ut.oP)(n):n,T=(0,Ft.i6)(),P=(0,Ft.IT)(),I=(0,i.useCallback)((()=>{T(C,ir)}),[T,C]),D=(0,V.Mk)(),A=(0,i.useRef)(0),j=(0,i.useRef)(null),L=(0,i.useCallback)((e=>{var t;let{target:r}=e;return r instanceof HTMLElement&&!(null!==(t=j.current)&&void 0!==t&&t.contains(r))}),[]),O=(0,i.useCallback)((e=>{if(!L(e)){if(e.preventDefault(),e.currentTarget.scrollIntoView({block:"nearest"}),h){if(A.current>Date.now())return;return A.current=Date.now()+300,void(f||(null==x||x(),D.logInteraction(v.yourLibraryItemFactory().hitPlay({itemToBePlayed:a}))))}o?o():C&&T(C,{...ir,replace:C===P.pathname}),D.logInteraction(v.yourLibraryItemFactory().hitUiNavigate({destination:a}))}}),[L,h,o,C,D,v,a,x,f,T,P.pathname]),_=(0,i.useCallback)((e=>{h||L(e)||x&&(S?f?D.logInteraction(v.yourLibraryItemFactory().doubleHitPause({itemToBePaused:a})):D.logInteraction(v.yourLibraryItemFactory().doubleHitResume({itemToBeResumed:a})):D.logInteraction(v.yourLibraryItemFactory().doubleHitPlay({itemToBePlayed:a})),null==x||x())}),[L,h,x,S,f,D,v,a]),k=(0,i.useCallback)((()=>{D.logInteraction(v.yourLibraryItemFactory().secondaryHitUiReveal())}),[D,v]),R=(0,Gt.C)({itemUris:[a],itemMimeTypes:[(0,Kt.Mb)(l)],dragLabelText:s,sectionId:w??0,dropOriginUri:m.k1});let F=[];d?F=m.gd:c&&(F=m.Mp);const E={[Ge.Ab.ON]:u,[Ge.Ab.BEFORE]:F,[Ge.Ab.AFTER]:F},{handleDropBeforeOrAfterRootlistItem:M,unpinConfirmationDialog:N}=tr({dropTargetUri:a,spec:v,isDropTargetPinned:d}),B=(0,i.useCallback)(((e,t)=>{t===Ge.Ab.ON?null==p||p(e,t):t!==Ge.Ab.BEFORE&&t!==Ge.Ab.AFTER||M(e,t)}),[p,M]),{dropPosition:U,className:Y,...W}=(0,Ge.eE)({uri:a,allowedMimeTypesByDropPosition:E,onDrop:B,onLongDragOver:g??I,reorderDirection:b?"horizontal":"vertical"}),H=(0,i.useCallback)((e=>{e.repeat||L(e)||("Backspace"!==e.key&&"Delete"!==e.key||!y||y(),"Enter"===e.key&&e.shiftKey&&x&&(e.preventDefault(),x()),"Enter"===e.key&&D.logInteraction(v.yourLibraryItemFactory().keyStrokeUiNavigate({destination:a})))}),[L,D,y,v,x,a]),K=null===(r=(0,wt.nX)(P.pathname,{parseUnknown:!0}))||void 0===r?void 0:r.toURI();return{onClick:O,onDoubleClick:_,draggable:!!s,onDragStart:R,onKeyDown:H,unpinConfirmationDialog:N,dropPosition:U,dropTargetClassName:Y,logRightClick:k,isViewActive:!!K&&(0,wt.mG)(a,K),itemRef:j,...W}}const nr=e=>{switch(e){case A.s.ALBUM:return H._s.get("web-player.your-library-x.type-album");case A.s.ARTIST:return H._s.get("web-player.your-library-x.type-artist");case A.s.FOLDER:return H._s.get("web-player.your-library-x.type-folder");case A.s.AUDIOBOOK:return H._s.get("web-player.your-library-x.type-audiobook");case A.s.YOUR_EPISODES:case A.s.LOCAL_FILES:case A.s.LIKED_SONGS:case A.s.PLAYLIST:return H._s.get("web-player.your-library-x.type-playlist");case A.s.SHOW:return H._s.get("web-player.your-library-x.type-show");case A.s.PRE_RELEASE:return H._s.get("web-player.your-library-x.type-prerelease-album");default:return(0,gt.E)(e)}},lr=e=>{switch(e){case A.s.YOUR_EPISODES:case A.s.LIKED_SONGS:case A.s.LOCAL_FILES:return A.s.PLAYLIST;default:return e}};var or=r(6836);const sr=i.createContext(!1),dr=e=>{let{children:t,isCompact:r}=e;return(0,h.jsx)(sr.Provider,{value:r,children:t})},cr=()=>(0,i.useContext)(sr),ur="eB4weTwpV1CJo1Ycry5o",pr="TaQop0j2CNkuRamIFPJm",gr="XbKq21A9yavQTZY4fYcy",yr="DHzyoCWhWjunaSpGo3fm",mr="R7bnv14gXI2ndBOqFvCf",xr="eYs_j7mhACuywEjr6wf4",br="IyHaBob4EvHvpR1d0aMt",hr=e=>{var t;let{uri:r,to:a=(null===(t=(0,wt.nX)(r))||void 0===t?void 0:t.toURLPath(!0))||"",handleNavigate:l,dragLabel:o,name:s,subtitle:d,cover:c,type:u,downloadButton:g,canReorder:y,allowedDropTargetDropOnMimeTypes:m,onDropTargetDropOn:x,onLongDragOver:b,menu:f,leading:S,openDeleteDialog:v,togglePlay:w,isPinned:C,shouldShowType:T,playbackUri:P,isPlaying:I,isActive:D,playInsteadOfNavigating:A,spec:j,index:L,animateClassName:O="",animateState:_}=e;const{onClick:k,onDoubleClick:R,draggable:F,onDragStart:E,onKeyDown:M,dropPosition:N,dropTargetClassName:B,unpinConfirmationDialog:U,logRightClick:V,isViewActive:Y,itemRef:W,...H}=ar({uri:r,to:a,handleNavigate:l,dragLabel:o,isPinned:C,canReorder:y,allowedDropTargetDropOnMimeTypes:m,onDropTargetDropOn:x,openDeleteDialog:v,onLongDragOver:b,togglePlay:w,isItemInGrid:!0,isPlaying:I,isActive:D,spec:j,playInsteadOfNavigating:A}),K=(0,h.jsx)(Ht,{uri:r,title:s,menu:f,handleNavigate:l,playbackUri:P}),G=(0,h.jsx)(Rt,{leading:(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(or.i,{pinned:C}),g]}),subtitle:(0,h.jsxs)(h.Fragment,{children:[T&&nr(u),!!d&&T&&" • ",d]}),uri:r}),z=(0,i.useRef)(null),X=cr();let q=(0,h.jsx)(p.UF,{menu:f,onShow:V,children:(0,h.jsx)(Tt.P,{uri:r,trigger:Tt.m.OnMouseDown,children:(0,h.jsx)(St.M,{id:r,title:K,subtitle:G,media:c,size:"sm",leading:S,className:n()(ur,{[O]:_}),variant:Y?"tinted":void 0,onClick:k,onDoubleClick:R,padding:vt.Uk,...H})})});return X&&(q=(0,h.jsx)(jt,{title:K,subtitleSlot:G,uri:r,isPlaying:I,parentRef:z,children:(0,h.jsx)("div",{children:(0,h.jsx)(p.UF,{menu:f,onShow:V,children:(0,h.jsx)(Tt.P,{uri:r,trigger:Tt.m.OnMouseDown,children:(0,h.jsx)(St.M,{id:r,title:void 0,media:c,size:"sm",className:n()(ur,pr,{[O]:_}),variant:Y?"tinted":void 0,onClick:k,onDoubleClick:R,padding:vt.yC,ref:z,...H})})})})})),(0,h.jsxs)(h.Fragment,{children:[U,(0,h.jsx)(Ct.I,{draggable:F,onDragStart:E,onKeyDown:M,className:n()(B,{[ze]:N===Ge.Ab.ON,[qe]:N===Ge.Ab.BEFORE,[Qe]:N===Ge.Ab.AFTER}),"aria-selected":D,innerRef:W,"aria-posinset":L,children:q})]})};var fr=r(92236),Sr=r(46522),vr=r(44616),wr=r(76892),Cr=r(62572),Tr=r(45176),Pr=r(29884);const Ir=e=>{let{name:t,uri:r,togglePlay:a,spec:l,isActive:o,isPlaying:s,size:d}=e;const c=(0,V.Mk)(),u=(0,i.useCallback)((()=>{o?s?c.logInteraction(l.yourLibraryItemFactory().doubleHitPause({itemToBePaused:r})):c.logInteraction(l.yourLibraryItemFactory().doubleHitResume({itemToBeResumed:r})):c.logInteraction(l.yourLibraryItemFactory().doubleHitPlay({itemToBePlayed:r})),a()}),[o,s,c,l,a,r]);return(0,h.jsx)("div",{className:n()(mr,{[br]:s,[xr]:"small"===d}),role:"gridcell",children:(0,h.jsx)(Pr.O,{isPlaying:s,onClick:u,ariaPlayLabel:H._s.get("playlist.a11y.play",t),ariaPauseLabel:H._s.get("playlist.a11y.pause",t),size:d})})},Dr=(0,i.memo)((function(e){let{title:t,type:r,images:i,isCircular:a,color:l,animateState:o,animateClassName:s=""}=e;const d=(0,Tr.S0)();return(0,h.jsx)(Sr.i,{fadeIn:!0,images:d(i,48),shape:a?Sr.O.CIRCLE:Sr.O.ROUNDED_CORNERS,size:vr.fm.SIZE_48,iconSize:"medium",type:r,title:t,className:n()(_t.c.entityImage,{[s]:o}),color:l,loadingMode:"eager"})})),Ar=(0,i.memo)((function(e){let{title:t,type:r,uri:a,images:n,isCircular:l,togglePlay:o,color:s,spec:d,isActive:u,isPlaying:p}=e;const g=(0,c.IP)(Dt.WI),y=cr(),m=(0,Tr.S0)(),[x,b]=(0,i.useState)("medium"),f=(0,i.useRef)(null);return(0,Cr.m)({onResize:e=>{let{width:t}=e;b(t<90?"small":"medium")},refOrElement:f}),(0,h.jsx)("div",{className:yr,ref:f,children:(0,h.jsx)(fr.y,{images:m(n,ca),FallbackComponent:e=>(0,h.jsx)(wr.Y,{semanticColor:"textSubdued",type:r,size:"xxlarge",className:g?gr:"",...e}),isCircular:l,color:s,loadingMode:"eager",children:o&&!y&&(0,h.jsx)(Ir,{name:t,uri:a,togglePlay:o,spec:d,isActive:u,isPlaying:p,size:x})})})}));var jr=r(84400);const Lr="_ymJNIfklFmogab9uWY1",Or=e=>{let{folderDepth:t=0}=e;return(0,h.jsx)("li",{className:Lr,style:{"--ylx-folder-depth":t}})},_r=e=>{var t;const{RowVariantComponent:r,uri:a,to:l=(null===(t=(0,wt.nX)(a))||void 0===t?void 0:t.toURLPath(!0))||"",handleNavigate:o,folderDepth:s,className:d,dragLabel:c,isPinned:u,canReorder:p,allowedDropTargetDropOnMimeTypes:g,onDropTargetDropOn:y,onLongDragOver:m,style:x,openDeleteDialog:b,togglePlay:f,isPlaying:S,isActive:v,type:w,menu:C,name:T,subtitle:P,downloadButton:I,expandFolderButton:D,cover:A,alt:j,addedAt:L,lastPlayedAt:O,shouldShowType:_,playbackUri:k,playInsteadOfNavigating:R,spec:F,nrValidItems:E,index:M,lockedIcon:N,onKeyDown:B,...U}=e,{onClick:V,onDoubleClick:Y,onDragStart:W,onKeyDown:H,dropPosition:K,dropTargetClassName:G,draggable:z,unpinConfirmationDialog:X,logRightClick:q,isViewActive:Q,itemRef:J,...Z}=ar({uri:a,to:l,type:w,handleNavigate:o,dragLabel:c,isPinned:u,canReorder:p,allowedDropTargetDropOnMimeTypes:g,onDropTargetDropOn:y,onLongDragOver:m,openDeleteDialog:b,togglePlay:f,isPlaying:S,isActive:v,playInsteadOfNavigating:R,spec:F,folderDepth:s}),$=(0,i.useCallback)((e=>{H(e),null==B||B(e)}),[H,B]);return(0,h.jsxs)(h.Fragment,{children:[X,K===Ge.Ab.BEFORE&&(0,h.jsx)(Or,{folderDepth:s}),(0,h.jsx)(jr.c,{style:{"--ylx-folder-depth":s,...x},draggable:z,onDragStart:W,onDoubleClick:Y,className:n()(d,G,Ne,{[ze]:K===Ge.Ab.ON}),...U,...Z,onKeyDown:$,innerRef:J,"aria-setsize":E,"aria-posinset":M+1,children:(0,h.jsx)(r,{...e,to:l,isActive:v,isViewActive:Q,onClick:V,logRightClick:q,playInsteadOfNavigating:R,parentRef:J})}),K===Ge.Ab.AFTER&&(0,h.jsx)(Or,{folderDepth:s})]})};function kr(e){var t;const{uri:r,artists:a}=e,{filter:n}=(0,i.useContext)(rt.on),{isPlaying:l,isActive:s}=(0,ft.kP)(r),d=(0,o.OY)(),c=(0,i.useCallback)((()=>{d((0,yt.ED)(r))}),[d,r]),{togglePlay:u}=(0,ht.I)({uri:r},{featureIdentifier:"album",referrerIdentifier:"your_library"});return{isPlaying:l,isActive:s,openDeleteDialog:c,togglePlay:u,menu:(0,h.jsx)(mt.k,{uri:r,canPin:e.canPin,isPinned:e.pinned,useDialogForUnfollow:!0,isInLibrary:!0}),subtitleText:(0,h.jsx)(bt.S,{searchWords:[n.trim()],textToHighlight:(null===(t=a.at(0))||void 0===t?void 0:t.name)??""}),downloadButton:(0,h.jsx)(xt.g,{uri:r,size:"xsmall",className:_t.c.icon,as:"span"})}}const Rr=e=>{let{libraryItem:t,shouldShowType:r=!1,RowVariantComponent:i,spec:a,nrValidItems:n,index:l}=e;const{uri:o,images:s,name:d,pinned:c,type:u,addedAt:p,lastPlayedAt:g,color:y}=t,{isPlaying:m,isActive:x,openDeleteDialog:b,togglePlay:f,menu:S,subtitleText:v,downloadButton:w}=kr(t),C=(0,h.jsx)(Dr,{title:d,type:u,images:s,color:y});return(0,h.jsx)(_r,{RowVariantComponent:i,uri:o,cover:C,name:d,subtitle:v,downloadButton:w,alt:d,type:u,dragLabel:d,menu:S,togglePlay:f,openDeleteDialog:b,addedAt:p,lastPlayedAt:g,isPinned:c,isPlaying:m,isActive:x,shouldShowType:r,spec:a,nrValidItems:n,index:l})},Fr=e=>{let{libraryItem:t,shouldShowType:r=!1,spec:i,index:a}=e;const{uri:n,images:l,name:o,pinned:s,type:d,color:c}=t,{togglePlay:u,menu:p,subtitleText:g,downloadButton:y,openDeleteDialog:m,isPlaying:x,isActive:b}=kr(t),f=(0,h.jsx)(Ar,{title:o,type:d,images:l,uri:n,togglePlay:u,color:c,spec:i,isActive:b,isPlaying:x});return(0,h.jsx)(hr,{uri:n,name:o,subtitle:g,menu:p,dragLabel:o,cover:f,downloadButton:y,type:d,togglePlay:u,isPinned:s,shouldShowType:r,openDeleteDialog:m,isPlaying:x,isActive:b,spec:i,index:a})};var Er=r(33744);function Mr(e){const{uri:t}=e,r=(0,o.OY)(),{togglePlay:a}=(0,ht.I)({uri:t},{featureIdentifier:"artist",referrerIdentifier:"your_library"}),{isPlaying:n,isActive:l}=(0,ft.kP)(t);return{togglePlay:a,isPlaying:n,isActive:l,openDeleteDialog:(0,i.useCallback)((()=>{r((0,yt.ED)(t))}),[r,t]),menu:(0,h.jsx)(Er.g,{uri:t,canPin:e.canPin,isPinned:e.pinned,useDialogForUnfollow:!0,isInLibrary:!0})}}const Nr=e=>{let{libraryItem:t,shouldShowType:r,RowVariantComponent:i,spec:a,nrValidItems:n,index:l}=e;const{uri:o,images:s,name:d,type:c,addedAt:u,lastPlayedAt:p,pinned:g,color:y}=t,{togglePlay:m,isPlaying:x,isActive:b,openDeleteDialog:f,menu:S}=Mr(t),v=(0,h.jsx)(Dr,{title:d,type:c,images:s,isCircular:!0,color:y});return(0,h.jsx)(_r,{RowVariantComponent:i,uri:o,cover:v,name:d,type:c,alt:d,dragLabel:d,menu:S,togglePlay:m,openDeleteDialog:f,addedAt:u,lastPlayedAt:p,isPlaying:x,isActive:b,isPinned:g,shouldShowType:r,spec:a,nrValidItems:n,index:l})},Br=e=>{let{libraryItem:t,shouldShowType:r,spec:i,index:a}=e;const{uri:n,images:l,name:o,type:s,pinned:d,color:c}=t,{togglePlay:u,menu:p,openDeleteDialog:g,isPlaying:y,isActive:m}=Mr(t),x=(0,h.jsx)(Ar,{title:o,type:s,images:l,uri:n,togglePlay:u,isCircular:!0,color:c,spec:i,isActive:m,isPlaying:y});return(0,h.jsx)(hr,{uri:n,name:o,menu:p,dragLabel:o,cover:x,type:s,togglePlay:u,isPinned:d,shouldShowType:r,openDeleteDialog:g,isPlaying:y,isActive:m,spec:i,index:a})};var Ur=r(65076),Vr=r(13080);const Yr=e=>{let{locked:t}=e;return t?(0,h.jsx)(Vr.i,{semanticColor:"textSubdued",title:H._s.get("mwp.header.content.unavailable"),className:_t.c.icon,size:"xsmall"}):null};function Wr(e){const{uri:t,authorName:r}=e,{filter:a}=(0,i.useContext)(rt.on),n=(0,o.OY)(),{isPlaying:l,isActive:s}=(0,ft.kP)(t);return{isPlaying:l,isActive:s,openDeleteDialog:(0,i.useCallback)((()=>{n((0,yt.ED)(t))}),[n,t]),menu:(0,h.jsx)(Ur.y,{uri:t,canPin:e.canPin,isPinned:e.pinned,useDialogForUnfollow:!0,isInLibrary:!0}),subtitleText:(0,h.jsx)(bt.S,{searchWords:[a.trim()],textToHighlight:r}),downloadButton:(0,h.jsx)(xt.g,{uri:t,size:"xsmall",className:_t.c.icon,as:"span"})}}const Hr=e=>{let{libraryItem:t,shouldShowType:r,RowVariantComponent:i,spec:a,nrValidItems:n,index:l}=e;const{uri:o,images:s,name:d,type:c,pinned:u,addedAt:p,lastPlayedAt:g,color:y}=t,{isPlaying:m,isActive:x,openDeleteDialog:b,menu:f,subtitleText:S,downloadButton:v}=Wr(t),w=(0,h.jsx)(Dr,{title:d,type:c,images:s,color:y}),C=(0,h.jsx)(Yr,{locked:t.isLocked});return(0,h.jsx)(_r,{RowVariantComponent:i,uri:o,cover:w,name:d,subtitle:S,alt:d,dragLabel:d,menu:f,openDeleteDialog:b,addedAt:p,lastPlayedAt:g,isPlaying:m,isActive:x,isPinned:u,shouldShowType:r,type:c,spec:a,nrValidItems:n,lockedIcon:C,index:l,downloadButton:v})},Kr=e=>{let{libraryItem:t,shouldShowType:r,spec:i,index:a}=e;const{uri:n,images:l,name:o,type:s,pinned:d,color:c}=t,{menu:u,subtitleText:p,openDeleteDialog:g,isPlaying:y,isActive:m,downloadButton:x}=Wr(t),b=(0,h.jsx)(Ar,{title:o,type:s,images:l,uri:n,color:c,spec:i,isActive:m,isPlaying:y});return(0,h.jsx)(hr,{uri:n,name:o,subtitle:p,menu:u,dragLabel:o,cover:b,isPinned:d,shouldShowType:r,type:s,openDeleteDialog:g,isPlaying:y,isActive:m,spec:i,index:a,downloadButton:x})};var Gr=r(29825),zr=r(71912),Xr=r(89592),qr=r(25272),Qr=r(79368),Jr=r(73628),Zr=r(90484);const $r=e=>{let{uri:t,spec:r}=e;const{togglePlay:a,isPlaying:n,isActive:l}=(0,ht.I)({uri:t},{featureIdentifier:"folder"}),o=(0,V.Mk)(),s=(0,i.useCallback)((()=>{a(),r&&o&&(n?o.logInteraction(r.playButtonFactory({uri:t}).hitPause({itemToBePaused:t})):l?o.logInteraction(r.playButtonFactory({uri:t}).hitResume({itemToBeResumed:t})):o.logInteraction(r.playButtonFactory({uri:t}).hitPlay({itemToBePlayed:t})))}),[l,n,o,r,a,t]);return(0,h.jsx)(Zr.I,{role:"menuitem",onClick:s,leadingIcon:n?(0,h.jsx)(Qr.A,{semanticColor:"textSubdued",size:"small"}):(0,h.jsx)(Jr.Y,{semanticColor:"textSubdued",size:"small"}),children:n?H._s.get("pause"):H._s.get("play")})},ei=i.memo((function(e){return(0,h.jsx)(y.oL,{value:"create-folder",children:(0,h.jsx)($r,{...e})})}));var ti=r(60056);const ri=e=>{let{uri:t,name:r,divider:a,spec:n,handleRename:l}=e;const s=(0,V.Mk)(),d=(0,o.OY)(),c=(0,i.useCallback)((()=>{n&&s.logInteraction(n.editButtonFactory({uri:t}).hitUiReveal()),d((0,yt.qI)(r,l))}),[d,s,r,l,n,t]);return(0,h.jsx)(Zr.I,{role:"menuitem",divider:a,onClick:c,leadingIcon:(0,h.jsx)(ti.G,{semanticColor:"textSubdued",size:"small"}),children:H._s.get("contextmenu.rename")})},ii=i.memo((function(e){return(0,h.jsx)(y.oL,{value:"rename",children:(0,h.jsx)(ri,{...e})})})),ai=i.memo((function(e){let{reference:t,name:r="",onRename:i,onCreateCallback:a=(()=>{}),onDeleteCallback:n,canPin:l=m.yu.NO,isPinned:o=!1}=e;const{spec:s}=(0,x.A)(t.uri);return(0,h.jsx)(y.oL,{value:"folder",children:(0,h.jsxs)(g.i,{children:[(0,h.jsx)(ii,{spec:s,uri:t.uri,name:r,handleRename:i}),(0,h.jsx)(b.ol,{uri:t.uri,divider:"after",onDeleteCallback:n}),(l!==m.yu.NO||o)&&(0,h.jsx)(qr.e,{uri:t.uri,canPin:l,isPinned:o,type:A.s.FOLDER,spec:s}),(0,h.jsx)(b.Cq,{position:{after:t},onCreateCallback:a,spec:s}),(0,h.jsx)(b.Sc,{position:{after:t},onCreateCallback:a,spec:s}),(0,h.jsx)(Xr.a,{uriToBeAdded:t.uri,isInLibrary:!0,spec:s}),(0,h.jsx)(ei,{uri:t.uri,spec:s})]})})}));var ni=r(51528),li=r(30140),oi=r(13748),si=r(37292),di=r(29684),ci=r(51696);const ui=e=>{let{uri:t}=e;const[r,a]=(0,i.useState)(!1),n=(0,i.useCallback)((()=>{a(!0),setTimeout((()=>{a(!1)}),500)}),[]);return(0,li.l)(ni.Wg.OPERATION_COMPLETE,(e=>{"add"===e.data.operation&&"liked-songs"===t&&n()})),(0,si.w)(oi.Yh.OPERATION_COMPLETE,(e=>{"add"===e.data.operation&&t===e.data.uri&&n()})),(0,di.e)(ci.KB.OPERATION_COMPLETE,(e=>{var r,i;"remove"!==e.data.operation&&"end"!==(null===(r=e.data.position)||void 0===r?void 0:r.after)&&(null===(i=e.data.position.after)||void 0===i?void 0:i.uri)===t&&(0,wt.Gm)(t)&&n()})),{animateState:r,animateClassName:_t.c.pulse}};var pi=r(40104),gi=r(96768),yi=r(7228);function mi(e,t){const{createPlaylistFromAlbum:r,createPlaylistFromTracks:a}=(0,ee.c)(),n=(0,V.Mk)(),l=(0,_.Y)(),o=er(),s=(0,i.useCallback)((r=>{if(!t)return;const{[Kt.__.PLAYLISTS_V2]:i=[],[Kt.__.FOLDERS]:a=[]}=r,s={after:{uri:t}};i.length&&(o(i,s),n.logInteraction(e.dragSort())),a.length&&(l.moveFolder({uri:a[0]},s),n.logInteraction(e.dragSort()))}),[o,n,l,e,t]),{unpinConfirmationDialog:d,applyDropWithUnpinConfirmation:c}=Jt({onApplyDrop:s});return{unpinConfirmationDialog:d,handleDropOnFolder:(0,i.useCallback)((async i=>{if(!t)return;const{[Kt.__.TRACKS]:l=[],[Kt.__.LOCAL_TRACKS]:o=[],[Kt.__.ALBUMS]:s=[],[Kt.__.EPISODES]:d=[],[Kt.__.PLAYLISTS_V2]:u=[],[Kt.__.FOLDERS]:p=[]}=i,g={after:{uri:t}};u.length||p.length?c(i,yi.Ab.ON):s.length?(r(s[0],g),n.logInteraction(e.yourLibraryItemFactory().dragCreatePlaylist())):(l.length||o.length||d.length)&&(a([...l,...o,...d],g),n.logInteraction(e.yourLibraryItemFactory().dragCreatePlaylist()))}),[t,c,r,n,e,a])}}const xi=[Kt.__.TRACKS,Kt.__.LOCAL_TRACKS,Kt.__.ALBUMS,Kt.__.EPISODES,Kt.__.PLAYLISTS_V2,Kt.__.FOLDERS];function bi(e,t){const{uri:r,name:a,numberOfFolders:n,numberOfPlaylists:l,pinned:s}=e,{isPlaying:d,isActive:c}=(0,ft.kP)(r),{pushFolder:u}=(0,i.useContext)(at),p=(0,o.OY)(),{togglePlay:g}=(0,ht.I)({uri:r},{featureIdentifier:"folder",referrerIdentifier:"your_library"}),y=(0,o.w1)((e=>e.platform.isDesktop)),{handleDropOnFolder:m,unpinConfirmationDialog:x}=mi(t,r),{renameFolder:b}=(0,pi.io)(),f=m,S=[l>0||!n?H._s.get("web-player.your-library-x.rows.folder.number-of-playlists",l):null,n>0?H._s.get("web-player.your-library-x.rows.folder.number-of-folders",n):null].filter(gi.g).join(H._s.getSeparator()),v=(0,i.useCallback)((function(){b(e,arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")}),[e,b]),w=(0,i.useCallback)((()=>{u(e.uri)}),[e.uri,u]);return{openDeleteDialog:(0,i.useCallback)((()=>{p((0,yt.C2)(r))}),[p,r]),togglePlay:y?g:void 0,menu:(0,h.jsx)(ai,{reference:{uri:r},name:a,canPin:e.canPin,isPinned:s,onRename:v}),subtitleText:S,onDropTargetDropOn:f,handleNavigate:w,dropOnFolderUnpinConfirmationDialog:x,isPlaying:d,isActive:c}}const hi=e=>{var t;let{libraryItem:r,RowVariantComponent:a,spec:l,nrValidItems:o,index:s}=e;const{uri:d,folderDepth:c,name:u,type:p,isFlattened:g,pinned:y,canReorder:m}=r,{openDeleteDialog:x,togglePlay:b,menu:f,subtitleText:S,onDropTargetDropOn:v,handleNavigate:w,dropOnFolderUnpinConfirmationDialog:C,isPlaying:T,isActive:P}=bi(r,l),[I,D]=function(e){const{getIsFolderExpanded:t,setIsFolderExpanded:r}=(0,i.useContext)(he);return[(0,i.useMemo)((()=>t(e)),[t,e]),(0,i.useCallback)((t=>{r(e,t)}),[r,e])]}(d),A=(0,V.Mk)(),j=(0,i.useCallback)((()=>{D(!0),A.logInteraction(l.yourLibraryItemFactory().dragUiReveal())}),[A,D,l]),L=(0,i.useCallback)((e=>{e.stopPropagation()}),[]),O=(0,i.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),D(!I),I?A.logInteraction(l.yourLibraryItemFactory().toggleFolderButtonFactory().hitUiHide()):A.logInteraction(l.yourLibraryItemFactory().toggleFolderButtonFactory().hitUiReveal())}),[D,I,A,l]),_=(0,i.useCallback)((e=>{"ArrowLeft"===e.key?D(!1):"ArrowRight"===e.key&&D(!0)}),[D]),k=!g&&(0,h.jsx)(Gr.u,{"data-skip-in-keyboard-nav":!0,"aria-label":I?H._s.get("web-player.your-library-x.collapse-folder"):H._s.get("web-player.your-library-x.expand-folder"),iconOnly:zr.a,size:"small",condensedAll:!0,onClick:O,onDoubleClick:L,tabIndex:-1,className:n()(Pe,Ie,{[Me]:!I})}),{animateState:R,animateClassName:F}=ui({uri:d}),E=(0,h.jsx)(Dr,{title:u,type:p,animateState:R,animateClassName:F});return(0,h.jsxs)(h.Fragment,{children:[C,(0,h.jsx)(_r,{onKeyDown:_,RowVariantComponent:a,uri:d,to:`/folder/${(null===(t=(0,wt.nX)(d))||void 0===t?void 0:t.id)??""}`,handleNavigate:w,folderDepth:c,cover:E,name:u,subtitle:S,alt:u,dragLabel:u,menu:f,canReorder:m,allowedDropTargetDropOnMimeTypes:xi,onDropTargetDropOn:v,onLongDragOver:j,togglePlay:b,openDeleteDialog:x,addedAt:r.addedAt,lastPlayedAt:r.lastPlayedAt,isPinned:y,shouldShowType:!1,type:p,isPlaying:T,isActive:P,expandFolderButton:k,spec:l,nrValidItems:o,index:s})]})},fi=e=>{var t;let{libraryItem:r,spec:i,index:a}=e;const{uri:n,name:l,type:o,pinned:s,canReorder:d}=r,{togglePlay:c,menu:u,subtitleText:p,onDropTargetDropOn:g,handleNavigate:y,openDeleteDialog:m,isPlaying:x,isActive:b}=bi(r,i),{animateState:f,animateClassName:S}=ui({uri:n}),v=(0,h.jsx)(Ar,{title:l,type:o,uri:n,togglePlay:c,spec:i,isActive:b,isPlaying:x});return(0,h.jsx)(hr,{uri:n,to:`/folder/${(null===(t=(0,wt.nX)(n))||void 0===t?void 0:t.id)??""}`,handleNavigate:y,cover:v,name:l,subtitle:p,menu:u,dragLabel:l,canReorder:d,allowedDropTargetDropOnMimeTypes:xi,onLongDragOver:y,onDropTargetDropOn:g,togglePlay:c,isPinned:s,shouldShowType:!1,type:o,openDeleteDialog:m,isPlaying:x,isActive:b,spec:i,index:a,animateState:f,animateClassName:S})},Si=i.memo((function(e){let{uri:t,canPin:r,isPinned:i,downloadUri:a}=e;const{spec:n}=(0,x.A)(t);return(0,h.jsx)(y.oL,{value:"generic",children:(0,h.jsxs)(g.i,{children:[a?(0,h.jsx)(b.YD,{spec:n,uri:a}):null,r!==m.yu.NO&&(0,h.jsx)(qr.e,{uri:t,canPin:r,isPinned:i,type:A.s.PLAYLIST,spec:n})]})})}));var vi=r(68964);const wi=[Kt.__.TRACKS,Kt.__.LOCAL_TRACKS];function Ci(e){const{numberOfSongs:t}=e,r="spotify:collection:tracks",{user:a}=(0,o.w1)(vi.cx),n=(0,wt.ML)(null==a?void 0:a.id).toURI(),l=n,s=n,{togglePlay:d}=(0,ht.I)({uri:l},{featureIdentifier:"your_library",referrerIdentifier:"your_library"}),c=(0,i.useContext)(D.g),{isPlaying:u,isActive:p}=(0,ft.kP)(l),g=(0,i.useCallback)((e=>{const{[Kt.__.TRACKS]:t=[],[Kt.__.LOCAL_TRACKS]:r=[]}=e,i=[...t,...r];null!=i&&i.length&&(null==c||c.add({uris:i}))}),[c]);return{isPlaying:u,isActive:p,togglePlay:d,menu:(0,h.jsx)(Si,{uri:r,canPin:e.canPin,isPinned:e.pinned,downloadUri:s}),downloadButton:(0,h.jsx)(xt.g,{uri:s,size:"xsmall",className:_t.c.icon,as:"span"}),subtitleText:(0,h.jsx)(h.Fragment,{children:H._s.get("web-player.your-library-x.rows.liked-songs.subtitle",t)}),onDropTargetDropOn:g,playbackUri:l,uri:r}}const Ti=e=>{let{libraryItem:t,shouldShowType:r,RowVariantComponent:i,spec:a,nrValidItems:n,index:l}=e;const{images:o,name:s,type:d,pinned:c,addedAt:u,lastPlayedAt:p,color:g}=t,{isPlaying:y,isActive:m,togglePlay:x,menu:b,subtitleText:f,onDropTargetDropOn:S,playbackUri:v,uri:w,downloadButton:C}=Ci(t),{animateState:T,animateClassName:P}=ui({uri:"liked-songs"}),I=(0,h.jsx)(Dr,{title:s,type:d,images:o,color:g,animateState:T,animateClassName:P});return(0,h.jsx)(_r,{RowVariantComponent:i,uri:w,cover:I,name:s,subtitle:f,alt:s,dragLabel:s,menu:b,allowedDropTargetDropOnMimeTypes:wi,onDropTargetDropOn:S,togglePlay:x,addedAt:u,lastPlayedAt:p,isPlaying:y,isActive:m,isPinned:c,shouldShowType:r,type:d,playbackUri:v,downloadButton:C,spec:a,nrValidItems:n,index:l})},Pi=e=>{let{libraryItem:t,shouldShowType:r,spec:i,index:a}=e;const{images:n,name:l,type:o,pinned:s,color:d}=t,{togglePlay:c,menu:u,subtitleText:p,onDropTargetDropOn:g,playbackUri:y,uri:m,downloadButton:x,isPlaying:b,isActive:f}=Ci(t),{animateState:S,animateClassName:v}=ui({uri:"liked-songs"}),w=(0,h.jsx)(Ar,{title:l,type:o,images:n,uri:y,togglePlay:c,color:d,spec:i,isActive:f,isPlaying:b});return(0,h.jsx)(hr,{uri:m,name:l,subtitle:p,menu:u,dragLabel:l,allowedDropTargetDropOnMimeTypes:wi,onDropTargetDropOn:g,cover:w,togglePlay:c,isPinned:s,shouldShowType:r,type:o,playbackUri:y,downloadButton:x,isPlaying:b,isActive:f,spec:i,index:a,animateState:S,animateClassName:v})};var Ii=r(43756),Di=r(27824),Ai=r(31396),ji=r(33876);function Li(e){const{numberOfFiles:t}=e,r=ji.d,i=(0,Ai.qw)().uri,{isPlaying:a,isActive:n}=(0,ft.kP)(r);return{playbackUri:r,uri:i,isPlaying:a,isActive:n,menu:(0,h.jsx)(Si,{uri:i,canPin:e.canPin,isPinned:e.pinned}),downloadButton:(0,h.jsx)(Ii.E,{size:"xsmall",className:_t.c.icon,semanticColor:"textBrightAccent"}),subtitleText:H._s.get("web-player.your-library-x.rows.local-files.subtitle",t)}}const Oi=e=>{let{libraryItem:t,shouldShowType:r,RowVariantComponent:i,spec:a,nrValidItems:n,index:l}=e;const{name:o,addedAt:s,lastPlayedAt:d,type:c,pinned:u}=t,{playbackUri:p,uri:g,isPlaying:y,menu:m,subtitleText:x,downloadButton:b,isActive:f}=Li(t),S=(0,h.jsx)("div",{className:De,children:(0,h.jsx)(Di.u,{iconSize:24,title:o})});return(0,h.jsx)(_r,{RowVariantComponent:i,uri:g,name:o,subtitle:x,alt:o,dragLabel:o,menu:m,addedAt:s,lastPlayedAt:d,isPinned:u,isPlaying:y,isActive:f,shouldShowType:r,playbackUri:p,downloadButton:b,cover:S,type:c,spec:a,nrValidItems:n,index:l})},_i=e=>{let{libraryItem:t,shouldShowType:r,spec:i,index:a}=e;const{name:n,images:l,type:o,pinned:s}=t,{playbackUri:d,uri:u,menu:p,downloadButton:g,subtitleText:y,isPlaying:m,isActive:x}=Li(t),b=(0,c.IP)(Dt.WI),f=(0,h.jsx)("div",{className:yr,children:(0,h.jsx)(fr.y,{images:l,FallbackComponent:e=>(0,h.jsx)(Di.u,{size:"xxlarge",className:b?gr:"",...e})})});return(0,h.jsx)(hr,{uri:u,name:n,subtitle:y,menu:p,cover:f,type:o,playbackUri:d,downloadButton:g,isPinned:s,shouldShowType:r,isPlaying:m,isActive:x,spec:i,index:a})};var ki=r(16228);const Ri=e=>{let{index:t,type:r}=e;const i=(0,c.IP)(Dt.WI),a=cr();return(0,h.jsx)(ki.m_,{columnIndex:0,children:(0,h.jsx)(St.M,{className:n()(ur,{[pr]:a}),media:(0,h.jsx)(fr.y,{images:[],FallbackComponent:()=>(0,h.jsx)(wr.Y,{type:r,size:"xxlarge",className:i?gr:"",semanticColor:"textSubdued"}),isCircular:r===A.s.ARTIST}),variant:"naked",id:t,title:"",padding:a?vt.yC:vt.Uk})})};var Fi=r(61540),Ei=r(23308),Mi=r(47132),Ni=r(31732),Bi=r(47876),Ui=r(95596),Vi=r(94812),Yi=r(21844);const Wi=i.memo((function(e){var t,r,i;let{reference:a,isPublished:n,canPin:l=m.yu.NO,isPinned:o=!1,useDialogForUnfollow:s=!1,isInLibrary:d}=e;const{uri:c}=a,u=(0,pi.mY)(c),p=!(null==u||null===(t=u.permissions)||void 0===t||!t.isPrivate),f=(0,Mi.Q)(c)??(null==u?void 0:u.isPublished)??n,{spec:S}=(0,x.A)(c),v=null==u?void 0:u.hasSpotifyAudiobooks;return u&&(0,h.jsx)(y.oL,{value:"playlist",children:(0,h.jsxs)(g.i,{children:[!v&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(b.O0,{spec:S,uris:[c]}),(0,h.jsx)(Ui.c,{uri:c,spec:S})]}),!p&&(0,h.jsx)(b.TF,{spec:S,divider:u.isOwnedBySelf?"after":"both",uri:c,isPublished:f}),u.isOwnedBySelf&&(0,h.jsx)(b.QW,{spec:S,uri:c,name:u.name,description:u.description,image:u.images[0]}),!u.isOwnedBySelf&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(b.wD,{spec:S,uri:c}),(0,h.jsx)(Ei.Oq,{uri:c,useDialog:s,initialState:d})]}),u.isOwnedBySelf&&(0,h.jsx)(b.oG,{spec:S,uri:c}),!v&&(0,h.jsx)(b.YD,{spec:S,uri:c}),(0,h.jsx)(b.Cq,{position:{after:a},divider:"before",spec:S}),(0,h.jsx)(b.Sc,{position:{after:a},spec:S}),(null===(r=u.permissions)||void 0===r?void 0:r.canAdministratePermissions)&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(b._Q,{spec:S,divider:"before",uri:c,isPrivate:p}),!v&&(0,h.jsx)(Vi.w,{uri:c,spec:S})]}),(null===(i=u.permissions)||void 0===i?void 0:i.canCancelMembership)&&(0,h.jsx)(Yi.g,{spec:S,divider:"before",uri:c}),(0,h.jsx)(b.Nw,{spec:S,uri:c}),(0,h.jsx)(Xr.a,{uriToBeAdded:c,isInLibrary:!0,spec:S}),!v&&(0,h.jsx)(Ni.y,{spec:S,uris:[c],isPlaylist:!0}),(l!==m.yu.NO||o)&&(0,h.jsx)(qr.e,{uri:c,canPin:l,isPinned:o,type:A.s.PLAYLIST,spec:S}),(u.isOwnedBySelf||!p)&&(0,h.jsxs)(Bi.O,{divider:"before",children:[(0,h.jsx)(b.wZ,{spec:S,uri:c,displayText:H._s.get("contextmenu.share.copy-playlist-link"),isPrivatePlaylist:p}),(0,h.jsx)(b.o$,{spec:S,uri:c,type:A.s.PLAYLIST})]})]})})})),Hi=i.memo((function(e){let{reference:t,canPin:r=m.yu.NO,isPinned:i=!1}=e;const{uri:a}=t,{spec:n}=(0,x.A)(a);return(0,h.jsx)(y.oL,{value:"playlist",children:(0,h.jsxs)(g.i,{children:[(0,h.jsx)(b.Cq,{position:{after:t},divider:"before",spec:n}),(0,h.jsx)(b.Sc,{position:{after:t},spec:n}),r!==m.yu.NO&&(0,h.jsx)(qr.e,{uri:a,canPin:r,isPinned:i,type:A.s.PLAYLIST,spec:n})]})})}));var Ki=r(84944);const Gi=()=>(0,i.useContext)(Ki.I).getCapabilities();function zi(e,t){var r;const{uri:a,isLoading:n,owner:l,pinned:s}=e,d=(0,i.useContext)(pi.Iv),{filter:c}=(0,i.useContext)(rt.on),{canAddAudiobooks:u}=Gi(),p=[Kt.__.TRACKS,Kt.__.LOCAL_TRACKS,Kt.__.ALBUMS,Kt.__.EPISODES],y=u?[Kt.__.AUDIOBOOKS]:[];(0,i.useEffect)((()=>{n&&d.resync(a)}),[d,a,n]);const{togglePlay:m}=(0,ht.I)({uri:a},{featureIdentifier:"playlist",referrerIdentifier:"your_library"}),{isPlaying:x,isActive:b}=(0,ft.kP)(a),f=(0,o.OY)(),S=(0,V.Mk)();let v,w=[];const C=(0,i.useCallback)((async e=>{const{[Kt.__.TRACKS]:r=[],[Kt.__.LOCAL_TRACKS]:i=[],[Kt.__.ALBUMS]:n=[],[Kt.__.EPISODES]:l=[],[Kt.__.AUDIOBOOKS]:o=[]}=e,s=[...r,...i,...n,...l,...o];f((0,Fi.gZ)(a,s)),S.logInteraction(t.yourLibraryItemFactory().dragAddToPlaylist({itemToBeAdded:s.at(0)??"",playlist:a}))}),[f,S,t,a]);e.canAddTo&&(w=e.isEmpty?[...y,...p]:e.isBooklist?y:p,v=C);const T=(0,i.useCallback)((()=>{f((0,yt.em)(a))}),[f,a]),P=(0,lt.gH)(a),I=!(e.name||null!==(r=e.owner)&&void 0!==r&&r.uri);let D;D=P?(0,h.jsx)(Hi,{reference:e,canPin:e.canPin,isPinned:s}):I?(0,h.jsx)(g.i,{children:(0,h.jsx)(Ei.Oq,{uri:a,initialState:!0})}):(0,h.jsx)(Wi,{reference:e,canPin:e.canPin,isPinned:s,useDialogForUnfollow:!0,isInLibrary:!0});const A=(0,h.jsx)(xt.g,{uri:a,size:"xsmall",className:_t.c.icon,as:"span"}),j=(0,lt.gH)(a)?(0,h.jsx)(h.Fragment,{children:H._s.get("ylx.clicktoplay")}):(l.uri,(0,h.jsx)(bt.S,{searchWords:[c.trim()],textToHighlight:l.name}));return{openDeleteDialog:T,togglePlay:e.isBooklist?void 0:m,isPlaying:x,isActive:b,menu:D,downloadButton:A,subtitleText:j,allowedDropTargetDropOnMimeTypes:w,onDropTargetDropOn:v}}const Xi=e=>{let{libraryItem:t,shouldShowType:r,RowVariantComponent:i,spec:a,nrValidItems:n,index:l}=e;const{uri:o,images:s,folderDepth:d,name:c,type:u,pinned:p,addedAt:g,lastPlayedAt:y,color:m,canReorder:x}=t,{openDeleteDialog:b,togglePlay:f,isPlaying:S,isActive:v,menu:w,downloadButton:C,subtitleText:T,allowedDropTargetDropOnMimeTypes:P,onDropTargetDropOn:I}=zi(t,a),{animateState:D,animateClassName:A}=ui({uri:o}),j=(0,h.jsx)(Dr,{title:c,type:u,images:s,color:m,animateState:D,animateClassName:A});return(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(_r,{RowVariantComponent:i,uri:o,folderDepth:d,cover:j,name:c,subtitle:T,alt:c,dragLabel:c,menu:w,canReorder:x,allowedDropTargetDropOnMimeTypes:P,onDropTargetDropOn:I,togglePlay:f,openDeleteDialog:b,addedAt:g,lastPlayedAt:y,isPlaying:S,isActive:v,isPinned:p,shouldShowType:r,type:u,downloadButton:C,spec:a,playInsteadOfNavigating:(0,lt.gH)(o),nrValidItems:n,index:l})})},qi=e=>{let{libraryItem:t,shouldShowType:r,spec:i,index:a}=e;const{uri:n,images:l,name:o,type:s,pinned:d,color:c,canReorder:u}=t,{togglePlay:p,menu:g,downloadButton:y,subtitleText:m,onDropTargetDropOn:x,allowedDropTargetDropOnMimeTypes:b,openDeleteDialog:f,isPlaying:S,isActive:v}=zi(t,i),{animateState:w,animateClassName:C}=ui({uri:n}),T=(0,h.jsx)(Ar,{title:o,type:s,images:l,uri:n,togglePlay:p,color:c,spec:i,isActive:v,isPlaying:S});return(0,h.jsx)(hr,{uri:n,name:o,subtitle:m,menu:g,dragLabel:o,canReorder:u,allowedDropTargetDropOnMimeTypes:b,onDropTargetDropOn:x,cover:T,togglePlay:p,isPinned:d,shouldShowType:r,type:s,downloadButton:y,openDeleteDialog:f,isPlaying:S,isActive:v,spec:i,playInsteadOfNavigating:(0,lt.gH)(n),index:a,animateState:w,animateClassName:C})};var Qi=r(89520);function Ji(e){const{uri:t,artists:r,canPin:a,pinned:n}=e,{filter:l}=(0,i.useContext)(rt.on),s=(0,o.OY)(),d=(0,i.useCallback)((()=>{s((0,yt.ED)(t))}),[s,t]),c=r.at(0);return{openDeleteDialog:d,menu:(0,h.jsx)(Qi.u,{uri:t,artistUri:null==c?void 0:c.uri,canPin:a,isPinned:n,canRemove:!0}),subtitleText:(0,h.jsx)(bt.S,{searchWords:[l.trim()],textToHighlight:(null==c?void 0:c.name)??""})}}const Zi=e=>{let{libraryItem:t,shouldShowType:r=!1,RowVariantComponent:i,spec:a,nrValidItems:n,index:l}=e;const{uri:o,images:s,name:d,pinned:c,type:u,addedAt:p,lastPlayedAt:g,color:y}=t,{openDeleteDialog:m,menu:x,subtitleText:b}=Ji(t),f=(0,h.jsx)(Dr,{title:d,type:u,images:s,color:y});return(0,h.jsx)(_r,{RowVariantComponent:i,uri:o,cover:f,name:d,subtitle:b,alt:d,type:u,dragLabel:d,menu:x,openDeleteDialog:m,addedAt:p,lastPlayedAt:g,isPinned:c,isPlaying:!1,isActive:!1,shouldShowType:r,spec:a,nrValidItems:n,index:l})},$i=e=>{let{libraryItem:t,shouldShowType:r=!1,spec:i,index:a}=e;const{uri:n,images:l,name:o,pinned:s,type:d,color:c}=t,{menu:u,subtitleText:p,openDeleteDialog:g}=Ji(t),y=(0,h.jsx)(Ar,{title:o,type:d,images:l,uri:n,color:c,spec:i,isActive:!1,isPlaying:!1});return(0,h.jsx)(hr,{uri:n,name:o,subtitle:p,menu:u,dragLabel:o,cover:y,type:d,isPinned:s,shouldShowType:r,openDeleteDialog:g,isPlaying:!1,isActive:!1,spec:i,index:a})};var ea=r(81472);function ta(e){const{uri:t,publisher:r}=e,{filter:a}=(0,i.useContext)(rt.on),n=(0,o.OY)(),{togglePlay:l}=(0,ht.I)({uri:t},{featureIdentifier:"show",referrerIdentifier:"your_library"}),{isPlaying:s,isActive:d}=(0,ft.kP)(t);return{isPlaying:s,isActive:d,openDeleteDialog:(0,i.useCallback)((()=>{n((0,yt.ED)(t))}),[n,t]),togglePlay:l,menu:(0,h.jsx)(ea.Q,{uri:t,canPin:e.canPin,isPinned:e.pinned,useDialogForUnfollow:!0,isInLibrary:!0}),downloadButton:(0,h.jsx)(xt.g,{uri:t,size:"xsmall",className:_t.c.icon,as:"span"}),subtitleText:(0,h.jsx)(bt.S,{autoEscape:!0,searchWords:[a.trim()],textToHighlight:r})}}const ra=e=>{let{libraryItem:t,shouldShowType:r,RowVariantComponent:i,spec:a,nrValidItems:n,index:l}=e;const{uri:o,images:s,name:d,type:c,addedAt:u,lastPlayedAt:p,pinned:g,color:y}=t,{isPlaying:m,isActive:x,openDeleteDialog:b,togglePlay:f,menu:S,downloadButton:v,subtitleText:w}=ta(t),C=(0,h.jsx)(Dr,{title:d,type:c,images:s,color:y});return(0,h.jsx)(_r,{RowVariantComponent:i,uri:o,cover:C,name:d,subtitle:w,alt:d,dragLabel:d,menu:S,togglePlay:f,openDeleteDialog:b,addedAt:u,lastPlayedAt:p,isPlaying:m,isActive:x,isPinned:g,shouldShowType:r,type:c,downloadButton:v,spec:a,nrValidItems:n,index:l})},ia=e=>{let{libraryItem:t,shouldShowType:r,spec:i,index:a}=e;const{uri:n,images:l,name:o,type:s,pinned:d,color:c}=t,{togglePlay:u,menu:p,downloadButton:g,subtitleText:y,openDeleteDialog:m,isPlaying:x,isActive:b}=ta(t),f=(0,h.jsx)(Ar,{title:o,type:s,images:l,uri:n,togglePlay:u,color:c,spec:i,isActive:b,isPlaying:x});return(0,h.jsx)(hr,{uri:n,name:o,subtitle:y,menu:p,dragLabel:o,cover:f,togglePlay:u,isPinned:d,shouldShowType:r,type:s,downloadButton:g,openDeleteDialog:m,isPlaying:x,isActive:b,spec:i,index:a})},aa=[Kt.__.EPISODES];function na(e){const{numberOfDownloadedEpisodes:t}=e,{user:r}=(0,o.w1)(vi.cx),a=(0,wt.ML)(null==r?void 0:r.id,"your-episodes").toURI(),n=m.ql,{togglePlay:l}=(0,ht.I)({uri:a},{featureIdentifier:"episode",referrerIdentifier:"your_library"}),{isPlaying:s,isActive:d}=(0,ft.kP)(a),c=(0,i.useContext)(D.g),u=(0,i.useCallback)((e=>{const{[Kt.__.EPISODES]:t=[]}=e;null!=t&&t.length&&(null==c||c.add({uris:t}))}),[c]);return{isPlaying:s,isActive:d,togglePlay:l,menu:(0,h.jsx)(Si,{uri:n,canPin:e.canPin,isPinned:e.pinned}),downloadButton:t?(0,h.jsx)(Ii.E,{size:"xsmall",className:_t.c.icon,semanticColor:"textBrightAccent"}):null,subtitleText:H._s.get("web-player.your-library-x.subtitle-your-episodes"),onDropTargetDropOn:u,playbackUri:a,uri:n}}const la=e=>{let{libraryItem:t,RowVariantComponent:r,spec:i,nrValidItems:a,index:n}=e;const{images:l,name:o,type:s,pinned:d,lastPlayedAt:c,addedAt:u,color:p}=t,{isPlaying:g,isActive:y,togglePlay:m,menu:x,downloadButton:b,subtitleText:f,onDropTargetDropOn:S,playbackUri:v,uri:w}=na(t),C=(0,h.jsx)(Dr,{title:o,type:s,images:l,color:p});return(0,h.jsx)(_r,{RowVariantComponent:r,uri:w,cover:C,name:o,subtitle:f,alt:o,dragLabel:o,menu:x,allowedDropTargetDropOnMimeTypes:aa,onDropTargetDropOn:S,togglePlay:m,addedAt:u,lastPlayedAt:c,isPlaying:g,isActive:y,isPinned:d,shouldShowType:!1,type:s,downloadButton:b,playbackUri:v,spec:i,nrValidItems:a,index:n})},oa=e=>{let{libraryItem:t,spec:r,index:i}=e;const{images:a,name:n,type:l,pinned:o,color:s}=t,{togglePlay:d,menu:c,downloadButton:u,subtitleText:p,onDropTargetDropOn:g,playbackUri:y,uri:m,isPlaying:x,isActive:b}=na(t),f=(0,h.jsx)(Ar,{title:n,type:l,images:a,uri:m,togglePlay:d,color:s,spec:r,isActive:b,isPlaying:x});return(0,h.jsx)(hr,{uri:m,name:n,subtitle:p,menu:c,dragLabel:n,allowedDropTargetDropOnMimeTypes:aa,onDropTargetDropOn:g,cover:f,togglePlay:d,playbackUri:y,downloadButton:u,isPinned:o,shouldShowType:!1,type:l,isPlaying:x,isActive:b,spec:r,index:i})};var sa=r(15040);function da(){const e=(0,c.IP)(sa.WIf),[t,r]=(0,fe.k)("ylx-grid-scale",1);return{gridScale:e?t:1,setGridScale:r}}const ca=250,ua=(0,pt.Q)(A.s),pa=(0,i.memo)((function(e){let{item:t,primaryFilter:r,spec:i,index:a}=e;const n={shouldShowType:!(0,lt.gH)(t.uri)&&lr(t.type)!==r,spec:i,index:a},l=(0,c.IP)(sa.OSC);switch(t.type){case A.s.FOLDER:return(0,h.jsx)(fi,{libraryItem:t,...n});case A.s.ALBUM:return(0,h.jsx)(Fr,{libraryItem:t,...n});case A.s.ARTIST:return(0,h.jsx)(Br,{libraryItem:t,...n});case A.s.AUDIOBOOK:return(0,h.jsx)(Kr,{libraryItem:t,...n});case A.s.SHOW:return(0,h.jsx)(ia,{libraryItem:t,...n});case A.s.PLAYLIST:return(0,h.jsx)(qi,{libraryItem:t,...n});case A.s.LIKED_SONGS:return(0,h.jsx)(Pi,{libraryItem:t,...n});case A.s.YOUR_EPISODES:return(0,h.jsx)(oa,{libraryItem:t,...n});case A.s.LOCAL_FILES:return(0,h.jsx)(_i,{libraryItem:t,...n});case A.s.PRE_RELEASE:return l?(0,h.jsx)($i,{libraryItem:t,...n}):null;default:(0,gt.E)(t)}})),ga=e=>{let{getItems:t,scrollNodeRef:r,primaryFilter:a,nrValidItems:n,spec:l}=e;const{gridScale:o}=da(),s=(0,st._B)(st.u0.NEW_CARDS,o),d=(0,i.useRef)({}),u=function(){const{gridScale:e}=da();return!!(0,c.IP)(sa.WIf)&&e<.8}(),p=(0,i.useCallback)((e=>(0,h.jsx)(Ri,{index:e,type:ua(a)?a:void 0},e)),[a]),g=(0,i.useCallback)(((e,r)=>t(e,r).map(((t,r)=>t?(0,h.jsx)(pa,{item:t,spec:l,primaryFilter:a,index:e+r},t.uri):p(`${e+r}`)))),[t,a,p,l]),y=(0,i.useCallback)(((e,t)=>{d.current={numColumns:e,rowHeight:t}}),[]);return(0,h.jsx)(ot.E,{config:s,children:(0,h.jsx)(dr,{isCompact:u,children:(0,h.jsx)(Ct.w,{firstInteractiveIsWrapper:!0,"aria-label":H._s.get("web-player.your-library-x.your-library"),"aria-rowcount":Math.round(n/(d.current.numColumns??1)),"aria-colcount":d.current.numColumns,children:(0,h.jsx)(ut,{renderItems:g,nrItems:n,estimatedItemMaxHeight:ca,scrollNodeRef:r,onGridResize:y})})})})};var ya=r(38848),ma=r(49828);const xa="UvXqRORKQr_N3jlgGTcS",ba="U2UDsqt0mNj27p4bm85K",ha="RAWO6AczuDMOTI0qAc0a",fa="j8iKBDzqTDtnDv4XbmrK",Sa="BhKGkKPprp2wm9bvfRKG",va="prGqQr33U0mG14TJ5V8a",wa="OMCDc2F7g_AufJAtaKfL",Ca="ha4xXmMVP7gCvKZh9Ipf",Ta="TxO7Ee8iwqBpkgznKHsd",Pa="O2Vp_sNHMLHUcgMPVnOA",Ia="WYU7SXdABSulyirnmIYb",Da="DF8qJeKP7CRNb13tJeJg",Aa=e=>{let{folderUri:t,dropTargetClassName:r,spec:a}=e;const{isCollapsed:l,ylxSidebarState:o,setYlxSidebarState:s,lastUncollapsedYlxSidebarState:d}=(0,P.iu)(),c=(0,V.Mk)(),u=(0,i.useCallback)((()=>{const e=o===P.MT.COLLAPSED?d:P.MT.COLLAPSED;s(e),c.logInteraction(a.hitToggleState({stateBeforeToggle:null!==o?P.MT[o].toLowerCase():"",stateAfterToggle:P.MT[e].toLowerCase()}))}),[o,d,s,c,a]),p=l?ya.Y:ma.Y;return(0,h.jsx)(K.Yl,{label:l?H._s.get("web-player.your-library-x.expand-your-library"):H._s.get("web-player.your-library-x.collapse-your-library"),placement:l?"right":void 0,children:(0,h.jsx)(Gr.u,{"aria-label":l?H._s.get("web-player.your-library-x.expand-your-library"):H._s.get("web-player.your-library-x.collapse-your-library"),onClick:u,className:n()(ha,wa,r),condensed:!0,iconLeading:t||l?void 0:p,iconOnly:t||l?p:void 0,children:!t&&!l&&H._s.get("web-player.your-library-x.your-library")})})};var ja=r(48576),La=r(6156);const Oa=e=>{let{dropTargetClassName:t,spec:r}=e;const{ylxSidebarState:i,setYlxSidebarState:a}=(0,P.iu)(),l=i===P.MT.DEFAULT,o=(0,V.Mk)();return(0,h.jsx)(K.Yl,{label:l?H._s.get("web-player.your-library-x.show-more"):H._s.get("web-player.your-library-x.show-less"),children:(0,h.jsx)(Gr.u,{className:n()(wa,Ta,t),iconOnly:l?ja.J:La.A,"aria-label":l?H._s.get("web-player.your-library-x.enlarge-your-library"):H._s.get("web-player.your-library-x.reduce-your-library"),onClick:()=>{a(l?P.MT.EXPANDED:P.MT.DEFAULT),o.logInteraction(r.hitToggleState({stateBeforeToggle:l?"default":"expanded",stateAfterToggle:l?"expanded":"default"}))},size:"small"})})};var _a=r(48064);const ka=e=>{let{folderMenu:t,folderName:r,dropTargetClassName:i}=e;return(0,h.jsx)(p.pD,{menu:t,children:(0,h.jsx)("span",{children:(0,h.jsx)(K.Yl,{label:H._s.get("more.label.context",r),children:(0,h.jsx)(Gr.u,{className:n()(wa,Ta,i),iconOnly:_a.U,"aria-haspopup":"menu","aria-label":H._s.get("more.label.context",r),size:"small"})})})})};var Ra=r(20892),Fa=r(65884),Ea=r(94672);const Ma=e=>{let{dropTargetClassName:t,spec:r}=e;const{isGridView:i,setItemsView:a}=(0,Ea.y)(),l=(0,V.Mk)();return(0,h.jsx)(K.Yl,{label:i?H._s.get("web-player.your-library-x.list-view"):H._s.get("web-player.your-library-x.grid-view"),children:(0,h.jsx)(Gr.u,{className:n()(wa,t),iconOnly:i?Ra.i:Fa.M,"aria-label":i?H._s.get("web-player.your-library-x.list-view"):H._s.get("web-player.your-library-x.grid-view"),onClick:()=>{a(i?Ea.w.LIST:Ea.w.GRID),l.logInteraction(r.hitToggleState({stateBeforeToggle:i?"grid":"list",stateAfterToggle:i?"list":"grid"}))},size:"small"})})};var Na=r(83216),Ba=r(7076),Ua=r(41712),Va=r(92280);const Ya=function(e){let{folderUri:t,spec:r}=e;const{createPlaylist:i}=(0,ee.c)(),{createFolder:a}=(0,pi.io)(),n=(0,V.Mk)(),l=(0,Va.A)(),o=t?{after:{uri:t}}:{before:"start"};return(0,h.jsxs)(g.i,{children:[(0,h.jsx)(Zr.I,{onClick:()=>{i(void 0,o),n.logInteraction(r.createPlaylistOptionFactory().hitCreatePlaylist())},role:"menuitem",leadingIcon:(0,h.jsx)(Ba.Y,{size:"small"}),children:H._s.get("web-player.your-library-x.create.create-a-new-playlist")}),!l&&(0,h.jsx)(Zr.I,{onClick:()=>{a(H._s.get("web-player.your-library-x.default_folder_name"),o),n.logInteraction(r.createFolderOptionFactory().hitCreateFolder({uri:""}))},role:"menuitem",leadingIcon:(0,h.jsx)(Ua.s,{size:"small"}),children:H._s.get("web-player.your-library-x.create.create-a-playlist-folder")})]})},Wa=e=>{let{className:t="",folderUri:r,tooltipPlacement:a,spec:l}=e;const o=H._s.get("web-player.your-library-x.create.button-label"),s=(0,V.Mk)(),{canAddAudiobooks:d}=Gi(),{createPlaylistFromAlbum:c,createPlaylistFromTracks:u,createPlaylistFromPlaylist:g}=(0,ee.c)(),{className:y,dropPosition:m,...x}=(0,Ge.eE)({allowedMimeTypesByDropPosition:{[Ge.Ab.ON]:[Kt.__.TRACKS,Kt.__.EPISODES,Kt.__.ALBUMS,Kt.__.PLAYLISTS_V2,...d?[Kt.__.AUDIOBOOKS]:[]]},onDrop:(0,i.useCallback)((e=>{const{[Kt.__.TRACKS]:t=[],[Kt.__.LOCAL_TRACKS]:i=[],[Kt.__.EPISODES]:a=[],[Kt.__.AUDIOBOOKS]:n=[],[Kt.__.ALBUMS]:l=[],[Kt.__.PLAYLISTS_V2]:o=[]}=e,s=r?{after:{uri:r}}:{before:"start"},d=[...t,...i,...a];n.length>0?u(n,s):d.length?u(d,s):l.length>0?c(l[0],s):o.length>0&&g(o[0],s)}),[c,g,u,r])});return(0,h.jsx)(p.SM,{renderInline:!0,menu:(0,h.jsx)(Ya,{folderUri:r,spec:l.createMenuFactory()}),preventScrollingWhileOpen:!1,children:(e,r,i)=>(0,h.jsx)(K.Yl,{label:o,placement:a,children:(0,h.jsx)(Gr.u,{ref:i,iconOnly:Na.S,className:n()(t,y,{[Xe]:m===Ge.Ab.ON}),"aria-label":o,onClick:e=>{r(e),s.logInteraction(l.hitUiReveal())},size:"small",...x})})})};var Ha=r(5540);const Ka=e=>{let{handleNavigateBack:t,parentFolderUri:r,spec:i}=e;const{handleDropBeforeOrAfterRootlistItem:a}=tr({dropTargetUri:r,spec:i}),{dropPosition:l,className:o,...s}=(0,Ge.eE)({allowedMimeTypesByDropPosition:{[Ge.Ab.ON]:Ll},onDrop:async e=>{a(e,Ge.Ab.BEFORE)},onLongDragOver:t});return(0,h.jsx)(K.Yl,{label:H._s.get("web-player.your-library-x.navigate-back-folder"),children:(0,h.jsx)(Gr.u,{className:n()(wa,Ca,o,{[Xe]:l===Ge.Ab.ON}),"aria-label":H._s.get("web-player.your-library-x.navigate-back-folder"),onClick:t,iconOnly:Ha.C,size:"small",...s})})},Ga=(0,i.forwardRef)((function(e,t){let{folderUri:r,folderName:a,folderMenu:l,onRename:s,spec:d,className:c}=e;const{isActive:u}=(0,ft.kP)(r??"not-a-folder"),g=(0,o.OY)(),y=(0,V.Mk)(),m=(0,i.useCallback)((()=>{g((0,yt.qI)(a,s)),y.logInteraction(d.hitRenameFolder({uri:r}))}),[g,a,r,y,s,d]);return(0,h.jsx)(K.Yl,{label:a,showDelay:K.AL,children:(0,h.jsx)("div",{className:n()(Ia,c),children:(0,h.jsx)(p.UF,{menu:l,children:(0,h.jsx)(Gr.u,{"aria-label":a,onClick:m,size:"small",condensed:!0,className:n()(wa),ref:t,children:(0,h.jsx)(Y.a,{variant:"bodyMediumBold",semanticColor:u?"textBrightAccent":void 0,className:Da,children:a})})})})})}));var za=r(54218),Xa=r(85784),qa=r(16064);const Qa="_4JcTGCbNeqSDgdBfKdfy",Ja="wB8ig1vfWJiTattGsxKX",Za=()=>{const{syncing:e,percentage:t,currentItem:r,totalItems:a}=function(){const[e,t]=(0,i.useState)({syncing:!1,percentage:0,totalItems:0,currentItem:0}),r=Xa.k.UPDATE_TOTAL_PROGRESS,a=(0,i.useCallback)((e=>t(e.data.progress)),[]);return(0,qa.W)(r,a),e}();return e?(0,h.jsxs)("div",{className:Qa,children:[(0,h.jsxs)("div",{className:Ja,children:[(0,h.jsx)(Y.a,{variant:"bodySmallBold",semanticColor:"textBase",children:H._s.get("web-player.your-library-x.download-progress-title")}),(0,h.jsx)(Y.a,{variant:"bodySmallBold",semanticColor:"textBase",children:H._s.get("web-player.your-library-x.download-progress-count-out-of-total",r,a)})]}),(0,h.jsx)(za.c,{value:t})]}):null};var $a=r(45208);const en=e=>{let{parentDropTargetClassName:t,isLibraryCompletelyEmpty:r,folderUri:a,folderName:l,spec:o}=e;const{isCollapsed:s,ylxSidebarState:u,canExpand:p}=(0,P.iu)(),{renameFolder:g}=(0,pi.io)(),{popFolder:y}=(0,i.useContext)(at),m=(0,i.useCallback)((function(){a&&g({uri:a},arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")}),[a,g]),x=(0,i.useCallback)((()=>{y()}),[y]),b=a?(0,h.jsx)(ai,{reference:{uri:a},name:l,onRename:m,onDeleteCallback:x}):null,{dropOriginIsYLX:f}=$t(),S=!s&&a&&void 0!==l,v=(0,i.useRef)(null),w=(0,i.useRef)(null),C=(0,i.useRef)(null);!function(e,t,r){for(var a=arguments.length,n=new Array(a>3?a-3:0),l=3;l<a;l++)n[l-3]=arguments[l];const o=(0,d.Y1)((()=>{if(e.current)if(t.current instanceof HTMLElement){e.current.style.display="block";const{scrollWidth:r,offsetWidth:i}=t.current,a=r>i;e.current.style.display=a?"none":"block"}else e.current.style.display="block"}),[n]);(0,i.useLayoutEffect)(o,[o]),(0,Cr.m)({refOrElement:r,observeOnly:"width",onResize:o})}(C,(0,i.useMemo)((()=>({get current(){var e,t;return(null===(e=w.current)||void 0===e?void 0:e.firstElementChild)instanceof HTMLElement?null===(t=w.current)||void 0===t?void 0:t.firstElementChild:null}})),[]),v,l,S);const T=(0,c.IP)(sa.WIf),I=(0,$a.u)(),D=!s||r&&s;return(0,h.jsxs)("header",{className:n()(xa,{[ba]:I,[Pa]:s}),ref:v,children:[!s&&(0,h.jsx)(Za,{}),(0,h.jsxs)("div",{className:n()(fa,{[Sa]:s}),children:[(0,h.jsxs)("div",{className:n()(va,{[Sa]:s}),children:[(0,h.jsx)(Aa,{folderUri:a,dropTargetClassName:t,spec:o.toggleCollapsedModeButtonFactory({identifier:""})}),a&&(0,h.jsx)(Ka,{handleNavigateBack:x,parentFolderUri:a,spec:o.folderBackButtonFactory()}),S&&(0,h.jsx)(Ga,{folderUri:a,folderName:l,folderMenu:b,onRename:m,spec:o.folderTitleFactory(),className:f?t:void 0,ref:w},a)]}),D&&(0,h.jsx)("span",{ref:C,children:(0,h.jsx)(Wa,{className:n()(wa,Ta),folderUri:a,tooltipPlacement:s?"right":void 0,spec:o.createMenuButtonFactory()})}),a&&!s&&(0,h.jsx)(ka,{folderName:l,folderMenu:b,dropTargetClassName:t}),u===P.MT.EXPANDED&&!T&&(0,h.jsx)(Ma,{dropTargetClassName:t,spec:o.viewDensityToggleFactory({identifier:""})}),(u===P.MT.DEFAULT&&p||u===P.MT.EXPANDED)&&(0,h.jsx)(Oa,{dropTargetClassName:t,spec:o.toggleExpandedModeButtonFactory({identifier:""})})]})]})};var tn=r(41936),rn=r(50408),an=r(58912);const nn=e=>{let{date:t}=e;return(0,h.jsx)(Y.a,{variant:"bodySmall",semanticColor:"textSubdued",className:ke,children:t&&H._s.formatRelativeDate(new Date(t),{year:"numeric",month:"short",day:"numeric",timeZone:"UTC"})})},ln=e=>{const t=e.handleNavigate,r=(0,h.jsx)(Wt,{uri:e.uri,title:e.name,menu:e.menu,handleNavigate:t,playbackUri:e.playbackUri}),i=e.expandFolderButton??(e.isPlaying&&(0,h.jsx)(It,{})),a=(0,h.jsx)(kt,{leading:(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(or.i,{pinned:e.isPinned}),e.downloadButton,e.lockedIcon]}),subtitle:(0,h.jsxs)(h.Fragment,{children:[e.shouldShowType&&nr(e.type),!!e.subtitle&&e.shouldShowType&&" • ",e.subtitle]}),uri:e.uri}),n=e.logRightClick,l=(0,h.jsx)(p.UF,{menu:e.menu,onShow:n,children:(0,h.jsx)(Tt.P,{uri:e.uri,trigger:Tt.m.OnMouseDown,children:(0,h.jsx)(rn.U,{className:ve,media:e.cover,title:r,subtitle:a,trailing:i,id:e.uri,variant:e.isViewActive?"tinted":void 0,padding:vt.q,onClick:e.onClick,hoverAnimationDuration:"0ms"})})});return(0,lt.gH)(e.uri)?(0,h.jsx)(lt.cr,{parentRef:e.parentRef,children:l}):l},on=e=>{const t=e.handleNavigate,r=(0,h.jsx)(Wt,{uri:e.uri,title:e.name,menu:e.menu,handleNavigate:t,playbackUri:e.playbackUri}),i=(0,h.jsx)(kt,{leading:(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(or.i,{pinned:e.isPinned}),e.downloadButton,e.lockedIcon]}),subtitle:(0,h.jsxs)(h.Fragment,{children:[e.shouldShowType&&nr(e.type),!!e.subtitle&&e.shouldShowType&&" • ",e.subtitle]}),uri:e.uri}),a=e.logRightClick;return(0,h.jsx)(jt,{...e,title:r,subtitleSlot:i,parentRef:e.parentRef,children:(0,h.jsxs)("div",{children:[(0,h.jsx)(p.UF,{menu:e.menu,onShow:a,children:(0,h.jsx)(Tt.P,{uri:e.uri,trigger:Tt.m.OnMouseDown,children:(0,h.jsx)(rn.U,{className:n()(ve,Ce),media:e.cover,id:e.uri,padding:vt.q,onClick:e.onClick,variant:void 0,title:void 0,hoverAnimationDuration:"0ms"})})}),(0,h.jsxs)("span",{className:Be,children:[r," ",i]})]})})},sn=e=>{const t=(0,i.useRef)(null),r=e.logRightClick;return(0,h.jsx)(p.UF,{menu:e.menu,onShow:r,children:(0,h.jsxs)("div",{className:_e,ref:t,children:[(0,h.jsx)(ln,{...e,parentRef:t}),(0,h.jsx)(nn,{date:e.addedAt}),(0,h.jsx)(nn,{date:e.lastPlayedAt})]})})},dn=e=>{const t=e.handleNavigate,r=(0,h.jsxs)("div",{className:Ee,children:[(0,h.jsx)(Wt,{uri:e.uri,title:e.name,menu:e.menu,handleNavigate:t,playbackUri:e.playbackUri}),e.shouldShowType&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(an.y,{children:"•"}),(0,h.jsx)(an.y,{lineClamp:1,children:nr(e.type)})]}),(!e.shouldShowType&&e.type===A.s.ALBUM||(0,lt.gH)(e.uri))&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(an.y,{children:"•"}),(0,h.jsx)(kt,{leading:null,uri:e.uri,subtitle:e.subtitle})]})]}),i=(0,h.jsx)(or.i,{pinned:e.isPinned}),a=e.expandFolderButton??(e.isPlaying?(0,h.jsx)(It,{iconSize:"xsmall"}):(0,h.jsxs)(h.Fragment,{children:[e.downloadButton&&(0,h.jsx)("div",{className:Pe,children:e.downloadButton}),e.lockedIcon&&(0,h.jsx)("div",{className:Pe,children:e.lockedIcon})]})),l=e.logRightClick;return(0,h.jsx)(p.UF,{menu:e.menu,onShow:l,children:(0,h.jsx)(Tt.P,{uri:e.uri,trigger:Tt.m.OnMouseDown,children:(0,h.jsx)(rn.U,{className:n()(ve,we),title:r,leading:e.isPinned?i:void 0,trailing:a,id:e.uri,variant:e.isViewActive?"tinted":void 0,padding:`${vt.yC} ${vt.q}`,onClick:e.onClick,size:"sm",hoverAnimationDuration:"0ms"})})})},cn=e=>{const t=e.logRightClick;return(0,h.jsx)(p.UF,{menu:e.menu,onShow:t,children:(0,h.jsxs)("div",{className:_e,children:[(0,h.jsx)(dn,{...e}),(0,h.jsx)(nn,{date:e.addedAt}),(0,h.jsx)(nn,{date:e.lastPlayedAt})]})})},un=e=>{let{height:t,isCompact:r,primaryFilter:i}=e;return(0,h.jsx)(jr.c,{className:n()({[Ae]:!r,[Le]:r,[je]:i===A.s.ARTIST}),style:{height:t}})};let pn=function(e){return e[e.DEFAULT=0]="DEFAULT",e[e.COMPACT=1]="COMPACT",e}({});const gn=()=>{const[e,t]=(0,fe.k)("library-row-mode",pn.DEFAULT),r=(0,P.QV)();return{libraryRowMode:e,setLibraryRowMode:t,rowHeight:e===pn.DEFAULT||r===P.MT.COLLAPSED?64:32}},yn=(0,i.memo)((function(e){let{item:t,primaryFilter:r,RowVariantComponent:i,spec:a,nrValidItems:n,index:l}=e;const o={shouldShowType:!(0,lt.gH)(t.uri)&&lr(t.type)!==r,RowVariantComponent:i,spec:a,nrValidItems:n,index:l},s=(0,c.IP)(sa.OSC);switch(t.type){case A.s.FOLDER:return(0,h.jsx)(hi,{libraryItem:t,...o});case A.s.ALBUM:return(0,h.jsx)(Rr,{libraryItem:t,...o});case A.s.ARTIST:return(0,h.jsx)(Nr,{libraryItem:t,...o});case A.s.AUDIOBOOK:return(0,h.jsx)(Hr,{libraryItem:t,...o});case A.s.SHOW:return(0,h.jsx)(ra,{libraryItem:t,...o});case A.s.PLAYLIST:return(0,h.jsx)(Xi,{libraryItem:t,...o});case A.s.LIKED_SONGS:return(0,h.jsx)(Ti,{libraryItem:t,...o});case A.s.YOUR_EPISODES:return(0,h.jsx)(la,{libraryItem:t,...o});case A.s.LOCAL_FILES:return(0,h.jsx)(Oi,{libraryItem:t,...o});case A.s.PRE_RELEASE:return s?(0,h.jsx)(Zi,{libraryItem:t,...o}):null;default:(0,gt.E)(t)}})),mn=e=>{let{getItems:t,scrollNodeRef:r,primaryFilter:a,nrValidItems:n,spec:l}=e;const o=(0,P.QV)(),{rowHeight:s,libraryRowMode:d}=gn(),c=d===pn.COMPACT,u=((e,t)=>{switch(e){case P.MT.COLLAPSED:return on;case P.MT.DEFAULT:return t?dn:ln;case P.MT.EXPANDED:return t?cn:sn;default:(0,gt.E)(e)}})(o,c),p=(0,i.useCallback)(((e,t)=>(0,h.jsx)(un,{height:e,isCompact:c,primaryFilter:a},t)),[c,a]),g=(0,i.useCallback)(((e,r)=>t(e,r).map(((t,r)=>t?(0,h.jsx)(yn,{item:t,spec:l,RowVariantComponent:u,primaryFilter:a,nrValidItems:n,index:e+r},t.uri):p(`${s}px`,`${e+r}`)))),[u,t,a,p,s,l,n]);return(0,h.jsx)(jr.e,{circular:!1,allowsMultipleInteractiveChildrenInItem:!0,"aria-label":H._s.get("web-player.your-library-x.your-library"),children:(0,h.jsx)(tn.C,{renderRows:g,nrRows:n,rowHeight:s,scrollNodeRef:r,renderPlaceholder:p})})};r(97768);var xn=r(47124),bn=r(66112),hn=r(76008),fn=r(58060);const Sn="oszTUDKpXrPHyeWPs276",vn="cKHK53VIATgkMZYQDfol",wn="QMGfkFWtxrVkgNgFXDyw",Cn=function(e){let{title:t,bodyText:r,children:a,root:n,show:l,childrenWrapperClassName:o,onHide:s}=e;const[d,u]=(0,i.useState)(null),[p,g]=(0,i.useState)(null),y=(0,c.IP)(sa.q8O),m=(0,i.useCallback)((()=>{s()}),[s]);(0,i.useEffect)((()=>{if(!l)return()=>{};const e=e=>{"Escape"===e.key&&m()};return window.addEventListener("keydown",e,!0),()=>{window.removeEventListener("keydown",e,!0)}}),[m,p,l]);const x=null==d?void 0:d.getBoundingClientRect();return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("span",{ref:u,className:o,children:a}),x&&l&&y&&(0,bn.createPortal)((0,h.jsx)("div",{className:Sn,style:{top:(null==x?void 0:x.top)??0,left:(null==x?void 0:x.left)??0,width:null==x?void 0:x.width,height:null==x?void 0:x.height},ref:g,children:(0,h.jsxs)(fn._,{popoverTitle:t,arrow:fn._.left,colorSet:"announcement",className:vn,children:[(0,h.jsx)(Y.a,{as:"p",dangerouslySetInnerHTML:{__html:r||""}}),(0,h.jsx)(Gr.u,{size:"small",onClick:m,iconOnly:hn.K,"aria-label":H._s.get("close"),className:wn})]})}),n||document.body)]})};var Tn=r(33868),Pn=r(63824),In=r(70800),Dn=r(4552);const An=(e,t,r)=>{var i;const a=t.closest('li[role="presentation"]'),n=null===(i=e.parentElement)||void 0===i?void 0:i.querySelectorAll('ul[role="menu"]');if(r===Dn.w.UP){var l;const r=null==n?void 0:n[n.length-1],i=e.previousElementSibling,o=null==a||null===(l=a.previousElementSibling)||void 0===l?void 0:l.previousElementSibling;if(t instanceof HTMLUListElement||!o){if(i&&i instanceof HTMLUListElement)return i;if(r&&r instanceof HTMLUListElement)return r}}else{if(!(null==a?void 0:a.nextElementSibling)){const t=e.nextElementSibling;return t&&t instanceof HTMLUListElement?t:null==n?void 0:n[0]}}},jn="RGofdOZulhL2p9MRA5hg",Ln="XZRX_ea9eNn4rOLpNGLp",On="rrv_gS6m_YN8K1nsq47l",_n="mdvwJxMDgGjicVAZoBAw",kn="VrBEyt4oriSVpJPs1Dmw",Rn=[{itemsViewState:Ea.w.LIST,compactModeState:pn.COMPACT},{itemsViewState:Ea.w.LIST,compactModeState:pn.DEFAULT},{itemsViewState:Ea.w.GRID,compactModeState:pn.DEFAULT}],Fn=(e,t,r)=>Math.round((e+t)*r)/r,En=e=>e.itemsViewState===Ea.w.GRID?H._s.get("web-player.your-library-x.sort-and-view-picker.grid"):e.compactModeState===pn.COMPACT?H._s.get("web-player.your-library-x.sort-and-view-picker.compact"):H._s.get("web-player.your-library-x.sort-and-view-picker.list"),Mn=e=>{let{selectedSort:t,selectedView:r,onSortSelect:a,onViewSelect:n,sortOptions:l,spec:o,id:s}=e;const d=(0,V.Mk)(),c=(0,i.useCallback)((e=>e.itemsViewState===Ea.w.GRID?(0,h.jsx)(Fa.M,{size:"small"}):e.compactModeState===pn.COMPACT?(0,h.jsx)(Tn.p,{size:"small"}):(0,h.jsx)(Ra.i,{size:"small"})),[]),{gridScale:u,setGridScale:p}=da(),y=e=>{const t=Fn(e,.5,100);p(t),d.logInteraction(o.gridDensitySliderFactory().dragSetSliderPosition({position:t}))},m=(0,i.useCallback)((e=>{p(e),d.logInteraction(o.gridDensitySliderFactory().hitSetSliderPosition({position:e}))}),[d,p,o]),x=e=>{var t;return null==e||null===(t=e.parentElement)||void 0===t?void 0:t.querySelector("ul")},b=(0,i.useRef)(null);return(0,h.jsxs)("div",{id:s,className:On,ref:b,children:[(0,h.jsxs)(g.i,{"aria-label":H._s.get("web-player.your-library-x.sort_by"),onFocusVerticalItem:An,getInitialFocusElement:x,children:[(0,h.jsx)(Pn.Y,{children:H._s.get("web-player.your-library-x.sort_by")}),l.map(((e,r)=>{let{key:i,value:n}=e;return(0,h.jsx)(Zr.I,{role:"menuitemradio","aria-checked":i===t.key,onClick:()=>a(i,r),divider:r===l.length-1?"after":void 0,autoClose:!1,children:n},i)}))]}),(0,h.jsxs)(g.i,{"aria-label":H._s.get("web-player.your-library-x.sort-and-view-picker.view-as"),onFocusVerticalItem:An,getInitialFocusElement:x,children:[(0,h.jsx)(Pn.Y,{children:H._s.get("web-player.your-library-x.sort-and-view-picker.view-as")}),Rn.map((e=>{const t=En(e),i=e.itemsViewState===r.itemsViewState&&e.compactModeState===r.compactModeState;return(0,h.jsx)(Zr.I,{role:"menuitemradio","aria-checked":i,onClick:()=>n(e),leadingIcon:c(e),autoClose:!1,children:t},t)})),Ea.w.GRID===r.itemsViewState&&(0,h.jsx)("li",{role:"presentation",children:(0,h.jsx)("div",{role:"menuitem",className:kn,children:(0,h.jsx)(In.cH,{labelText:H._s.get("web-player.your-library-x.sort-and-view-picker.grid-density-label"),value:Fn(u,-.5,100),max:1,step:.1,onDragStart:y,onDragMove:y,onDragEnd:y,onStepBackward:()=>m(Fn(u,-.1,10)),onStepForward:()=>m(Fn(u,.1,10)),forceActiveStyles:!0,"data-roving-interactive":"1"})})})]})]})};var Nn=r(96480);const Bn=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const[r,a]=(0,fe.k)("onboarding-dismissed:ylx-playlist-ordering",!1),[n,l]=(0,fe.k)("onboarding-dismissed-amount:ylx-playlist-ordering",0),[o,s]=(0,i.useState)(!1),{dropOriginIsYLX:d}=$t(),{draggingIsInProgress:c}=(0,i.useContext)(Zt.gT);(0,i.useEffect)((()=>{c&&d&&s(!0)}),[c,d]);const u=(0,i.useCallback)((()=>{a(!0),s(!1),l(n+1)}),[n,l,a]);return{show:e&&n<3&&(!r||o)&&(t||o),onHide:u}},Un=e=>{let{sortOptions:t,selectedSort:r,onSortSelect:a,root:n,showReorderingOnboarding:l,scrollNodeRef:o,spec:s}=e;const{itemsView:d,setItemsView:c}=(0,Ea.y)(),{libraryRowMode:u,setLibraryRowMode:g}=gn(),y=(0,V.Mk)(),m=(0,i.useCallback)((()=>{y.logInteraction(s.hitUiReveal())}),[y,s]),x=(0,i.useMemo)((()=>d===Ea.w.GRID?{itemsViewState:Ea.w.GRID,compactModeState:pn.DEFAULT}:u===pn.COMPACT?{itemsViewState:Ea.w.LIST,compactModeState:pn.COMPACT}:{itemsViewState:Ea.w.LIST,compactModeState:pn.DEFAULT}),[d,u]),b=(0,i.useCallback)((e=>{let t=s.viewAsOptionFactory({identifier:"grid",position:3}).hitUiElementToggle();e.itemsViewState===Ea.w.GRID?c(Ea.w.GRID):e.compactModeState===pn.COMPACT?(t=s.viewAsOptionFactory({identifier:"compact",position:1}).hitUiElementToggle(),c(Ea.w.LIST),g(pn.COMPACT)):(t=s.viewAsOptionFactory({identifier:"list",position:2}).hitUiElementToggle(),c(Ea.w.LIST),g(pn.DEFAULT)),y.logInteraction(t)}),[y,c,g,s]),f=(0,i.useRef)(null),S=(0,Nn.K)(o,"0px 0px 0px 0px",.75,f),[v,w]=(0,fe.k)("sort-view-picker-onboarding-seen",!1),{show:C,onHide:T}=Bn(v&&l,!S),P=(0,i.useCallback)((()=>{m(),w(!0)}),[m,w]);return(0,h.jsx)(Cn,{bodyText:H._s.get("web-player.your-library-x.sort-and-view-picker.view-onboarding"),root:n,show:!v&&!S,childrenWrapperClassName:Ln,onHide:()=>w(!0),children:(0,h.jsx)(Cn,{bodyText:H._s.get("web-player.your-library-x.custom-ordering-onboarding-text"),root:n,show:C,childrenWrapperClassName:Ln,onHide:T,children:(0,h.jsx)(p.pD,{menu:(0,h.jsx)(Mn,{selectedSort:r,selectedView:{itemsViewState:x.itemsViewState??Ea.w.LIST,compactModeState:x.compactModeState??pn.DEFAULT},sortOptions:t,onSortSelect:a,onViewSelect:b,spec:s,id:"sort-and-view-picker"}),placement:"bottom-end",children:(0,h.jsx)(Gr.u,{"aria-label":H._s.get("web-player.your-library-x.sort-and-view-picker.button-aria-label",r.value,En(x)),onClick:P,size:"small",iconTrailing:(I=x,I.itemsViewState===Ea.w.GRID?Fa.M:I.compactModeState===pn.COMPACT?Tn.p:Ra.i),ref:f,role:"combobox","aria-controls":"sort-and-view-picker",children:(0,h.jsx)(Y.a,{variant:"bodySmall",className:_n,children:r.value})})})})});var I},Vn=e=>{let{sortOrders:t,activeSortOrderId:r,setActiveSortOrderId:a,root:n,showReorderingOnboarding:l,spec:o,scrollNodeRef:s}=e;const d=(0,i.useMemo)((()=>o.sortMenuButtonFactory()),[o]),u=(0,i.useMemo)((()=>o.sortbyViewasMenuButtonFactory()),[o]),p=(0,V.Mk)(),g=(0,Ke.u)(),y=t.find((e=>e.id===r))??(null==t?void 0:t.at(0)),m=(0,i.useRef)(null),x=(0,c.IP)(sa.WIf),b=(0,i.useCallback)(((e,t)=>{a(e);const r=g.getSortOrderLabel(e);x?p.logInteraction(u.sortOptionFactory({identifier:r,position:t}).hitSort()):p.logInteraction(d.sortMenuFactory().sortOptionFactory({identifier:r,position:t}).hitSort())}),[g,p,a,u,d,x]),{show:f,onHide:S}=Bn(l);return x?(0,h.jsx)(Un,{sortOptions:t.map((e=>{let{id:t,name:r}=e;return{key:t,value:r}})),selectedSort:{key:(null==y?void 0:y.id)??"",value:(null==y?void 0:y.name)??""},onSortSelect:b,root:n,showReorderingOnboarding:l,scrollNodeRef:s,spec:u}):(0,h.jsx)("div",{className:jn,ref:m,children:(0,h.jsx)(Cn,{bodyText:H._s.get("web-player.your-library-x.custom-ordering-onboarding-text"),root:n,show:f,childrenWrapperClassName:Ln,onHide:S,children:(0,h.jsx)(xn.W,{options:t.map((e=>{let{id:t,name:r}=e;return{key:t,value:r}})),onClick:()=>{p.logInteraction(d.hitUiReveal())},onSelect:b,selected:{key:(null==y?void 0:y.id)??"",value:(null==y?void 0:y.name)??""},heading:H._s.get("web-player.your-library-x.sort_by"),ariaLabel:H._s.get("web-player.your-library-x.sort_by")})})})};var Yn=r(3536),Wn=r(60078);const Hn=e=>{let{clearOnEscapeInElementRef:t,primaryFilter:r,spec:a}=e;const n=(0,Ke.u)(),l=(0,V.Mk)(),o=function(e){switch(e){case A.s.PRE_RELEASE:case A.s.ALBUM:return H._s.get("web-player.your-library-x.text-filter.albums-placeholder");case A.s.ARTIST:return H._s.get("web-player.your-library-x.text-filter.artists-placeholder");case A.s.PLAYLIST:return H._s.get("web-player.your-library-x.text-filter.playlists-placeholder");case A.s.SHOW:return H._s.get("web-player.your-library-x.text-filter.shows-placeholder");case A.s.AUDIOBOOK:return H._s.get("web-player.your-library-x.text-filter.audiobooks-placeholder");case"downloaded":return H._s.get("web-player.your-library-x.text-filter.downloaded-placeholder");case void 0:return H._s.get("web-player.your-library-x.text-filter.generic-placeholder");default:return void(0,gt.I)(e)}}(r),s=(0,i.useCallback)((()=>(l.logInteraction(a.searchButtonFactory().hitUiReveal()),!0)),[l,a]),d=(0,i.useCallback)((()=>(l.logInteraction(a.textFilterFactory().keyStrokeClearFilter()),!0)),[l,a]);return(0,h.jsx)(Yn.Q,{placeholder:o,clearOnEscapeInElementRef:t,debounceFilterChangeTimeout:null!=n&&n.getCapabilities().canTextFilterContentsInRealtime?0:void 0,expandDirection:"right",onActivate:s,onClear:d,useExpandCallback:e=>{(0,Wn.M)(C.Yj.FOCUS_YLX_TEXT_FILTER,e)}})};var Kn=r(90396),Gn=r(12444),zn=r(77808),Xn=r(51776),qn=r(26072),Qn=r(58136),Jn=r(71508),Zn=r(57200),$n=r(6640);const el=1248,tl=800,rl=(0,pt.Q)(qn.s),il=(0,pt.Q)(Qn.MT),al=()=>(function(){const{size:e,setSize:t,minWidth:r,maxWidth:a,ylxCollapsedStateNavbarWidth:n,ylxDefaultStateNavbarWidth:o,ylxExpandedStateNavbarWidth:s}=(0,Zn.Pi)(),{ylxSidebarState:d,setYlxSidebarState:c,canCollapse:u}=(0,Qn.iu)(),p=(0,$n.sH)(),g=(0,Xn.sN)(),{min:y,max:m,size:x,setSize:b}=(0,Xn.wT)(),h=(0,Jn.y)(),f=(0,i.useRef)(null),S=(0,i.useRef)(null),v=(0,i.useRef)(null);(0,i.useLayoutEffect)((()=>{const i=h-e-3*zn.In-(p!==qn.s.Disabled?x+zn.In:0),w={leftSidebarWidth:e,leftSidebarMinWidth:r,leftSidebarMaxWidth:a,ylxSidebarState:d,ylxSidebarStateRestoreTarget:f.current,rightSidebarWidth:x,rightSidebarMinWidth:y,rightSidebarMaxWidth:m,rightSidebarPanel:p,rightSidebarPanelRestoreTarget:S.current,storedCollapsedYLXWidth:n,storedDefaultYLXWidth:o,storedExpandedYLXWidth:s,clientWidth:h,mainContentWidth:i,canCollapse:u},C=v.current;if((0,l.Q)(w,C))return;const T=function(e,t){if(!e)return{};let{leftSidebarWidth:r=0,rightSidebarWidth:i=0}=t;const{mainContentWidth:a=0,leftSidebarMinWidth:n=0,leftSidebarMaxWidth:l=0,ylxSidebarState:o,ylxSidebarStateRestoreTarget:s,rightSidebarMinWidth:d=0,rightSidebarMaxWidth:c=0,rightSidebarPanel:u,rightSidebarPanelRestoreTarget:p,storedCollapsedYLXWidth:g=0,storedDefaultYLXWidth:y=0,storedExpandedYLXWidth:m=0,clientWidth:x=0,canCollapse:b=!0}=t,h={},f=u!==qn.s.Disabled,S=void 0!==e.leftSidebarWidth&&r>e.leftSidebarWidth,v=void 0!==e.rightSidebarWidth&&i>e.rightSidebarWidth,w=void 0===e.clientWidth?0:x-e.clientWidth,C=w<0,T=x>0,P=a<zn.SO?zn.SO-a:0;let I=C?-1*w:0;a>el?I=Math.max(0,I-(a-el)):P&&(I=P);const D=o===Qn.MT.EXPANDED&&e.ylxSidebarState!==Qn.MT.EXPANDED,A=o===Qn.MT.DEFAULT&&e.ylxSidebarState!==Qn.MT.DEFAULT;let j=r-n;S&&(j=D?r-Zn.ot.EXPANDED_MIN:A?r-Zn.ot.DEFAULT_MIN:0);let L=v?0:i-d;const O=I<=j+L;if(a<zn.SO&&!O)f&&(S||C&&(o===Qn.MT.COLLAPSED||!b))?(h.rightSidebarPanel=qn.s.Disabled,h.rightSidebarPanelRestoreTarget=t.rightSidebarPanel,I-=i,L=0):(o===Qn.MT.EXPANDED&&a+(r-Zn.ot.DEFAULT_MIN)>zn.SO?(h.ylxSidebarState=Qn.MT.DEFAULT,I-=r-y,j=y-Zn.ot.DEFAULT_MIN):(h.ylxSidebarState=Qn.MT.COLLAPSED,I-=r-g,j=0),h.ylxSidebarStateRestoreTarget=t.ylxSidebarState);else if(u===qn.s.Disabled&&p!==qn.s.Disabled&&rl(p)&&u!==e.rightSidebarPanelRestoreTarget&&a-i-zn.In>=zn.SO)h.rightSidebarPanel=p,h.rightSidebarPanelRestoreTarget=null;else if(o===Qn.MT.DEFAULT&&s===Qn.MT.EXPANDED&&a-(m-r)>=zn.SO)h.ylxSidebarState=Qn.MT.EXPANDED,h.ylxSidebarStateRestoreTarget=null;else if(o===Qn.MT.COLLAPSED&&s===Qn.MT.DEFAULT&&a-(y-r)>=zn.SO)h.ylxSidebarState=Qn.MT.DEFAULT,h.ylxSidebarStateRestoreTarget=null;else if(T&&a>=tl){let e=l-r,t=c-i;const a=Math.min(w,e+t);for(let n=0;n<a;n++)r<i&&r<l&&e>0?(r++,e--):i<c&&t>0&&(i++,t--)}o!==e.ylxSidebarState&&il(s)&&s===e.ylxSidebarStateRestoreTarget&&(h.ylxSidebarStateRestoreTarget=null);u!==e.rightSidebarPanel&&rl(p)&&p===e.rightSidebarPanelRestoreTarget&&(h.rightSidebarPanelRestoreTarget=null);if(I>0&&I<=j+L)for(let _=0;_<I;_++)r>i&&r>n&&j>0?(r--,j--):i>d&&L>0&&(i--,L--);r&&r!==t.leftSidebarWidth&&(h.leftSidebarWidth=r);i&&i!==t.rightSidebarWidth&&(h.rightSidebarWidth=i);return h}(C,w);void 0!==T.leftSidebarWidth&&t(T.leftSidebarWidth),il(T.ylxSidebarState)&&c(T.ylxSidebarState),void 0!==T.ylxSidebarStateRestoreTarget&&(f.current=T.ylxSidebarStateRestoreTarget),void 0!==T.rightSidebarWidth&&b(T.rightSidebarWidth),void 0!==T.rightSidebarPanel&&g((0,$n.O0)(T.rightSidebarPanel)),void 0!==T.rightSidebarPanelRestoreTarget&&(S.current=T.rightSidebarPanelRestoreTarget),v.current=w}),[e,r,a,t,d,x,y,m,b,p,n,o,s,c,g,h,u])}(),null),nl=()=>(0,c.IP)(sa.MF0,{loadingValue:!1})?(0,h.jsx)(al,{}):null;var ll=r(66852),ol=r(13932);var sl=r(2364);var dl=r(35064);function cl(){const[e,t]=(0,i.useState)(null);if((0,li.l)(ni.Wg.UPDATE_PIN_ERROR,(e=>{t(e.data)})),void 0===(null==e?void 0:e.reason))return null;switch(e.reason){case ni.uJ.TOO_MANY_PINS:return(0,h.jsx)(dl.G,{animated:!0,headingMessage:H._s.get("web-player.your-library-x.pin-error.title"),message:H._s.get("web-player.your-library-x.pin-error.message",e.maximumPinnedItems),buttonLabel:H._s.get("web-player.your-library-x.pin-error.ok"),isOpen:!0,onDismissDialog:()=>t(null)});case ni.uJ.NO_PIN_IN_FOLDER:return(0,h.jsx)(dl.G,{animated:!0,headingMessage:H._s.get("web-player.your-library-x.pin-error.no-pin-in-folder.title"),message:H._s.get("web-player.your-library-x.pin-error.no-pin-in-folder.message"),buttonLabel:H._s.get("web-player.your-library-x.pin-error.ok"),isOpen:!0,onDismissDialog:()=>t(null)});default:return(0,gt.I)(e),null}}var ul=r(15712),pl=r(48348),gl=r(89960);const yl={[ni.K.ALBUMS]:A.s.ALBUM,[ni.K.ARTISTS]:A.s.ARTIST,[ni.K.BOOKS]:A.s.AUDIOBOOK,[ni.K.EPISODES]:A.s.EPISODE,[ni.K.SHOWS]:A.s.SHOW,[ni.K.TRACKS]:A.s.TRACK};function ml(e,t){const r=(0,i.useCallback)((r=>{let{data:{list:i}}=r;xl(e,yl[i])&&t()}),[e,t]);(0,li.l)(ni.Wg.UPDATE,r),(0,li.l)(ni.Wg.UPDATE_PIN,t);const a=(0,i.useCallback)((()=>{xl(e,A.s.PLAYLIST)&&t()}),[e,t]);(0,pi.wv)(a),function(e){(0,gl.Qb)("hm://collection/ylpin/",!0,e)}(t),function(e){const t=(0,i.useContext)(pl.E),r=t.getEvents();(0,i.useEffect)((()=>(r.addListener(ul.g.UPDATE,e),()=>{r.removeListener(ul.g.UPDATE,e)})),[t,r,e])}(t)}function xl(e,t){switch(e){case A.s.ALBUM:case A.s.ARTIST:case A.s.AUDIOBOOK:case A.s.SHOW:return e===t;case A.s.PLAYLIST:switch(t){case A.s.TRACK:case A.s.PLAYLIST:case A.s.EPISODE:return!0;default:return!1}default:return!0}}const bl="PpUTJL2NIYDUnmfzVIbE",hl="_0FuodatXU4_fToYAuYtY",fl="RcGCSu8qHUle68BTwF73",Sl="_K79lE9KrIAkl_bUSSUM",vl="ifVI2CEdOZGgMWIUN2Cw",wl="dNphEfQzPRaQufS04jUm",Cl="glUVqQHA9VNQp0CHUTAs",Tl="MLbFLVC33caOj3FgSQMC",Pl="HUFl7FOi5oAlMEZNCBf4",Il="y2UicQnlTq148rL8Y0jp",Dl="wBsWS202aGdsul2kEGUf",Al={items:[],totalLength:0},jl=5e4,Ll=[Kt.__.TRACKS,Kt.__.LOCAL_TRACKS,Kt.__.ALBUMS,Kt.__.ARTISTS,Kt.__.PLAYLISTS_V2,Kt.__.SHOWS,Kt.__.AUDIOBOOKS,Kt.__.EPISODES,Kt.__.FOLDERS],Ol=[Kt.__.TRACKS,Kt.__.LOCAL_TRACKS,Kt.__.ALBUMS,Kt.__.EPISODES,Kt.__.PLAYLISTS_V2,Kt.__.FOLDERS],_l=()=>{var e,t,r,a;const{filter:o}=(0,i.useContext)(rt.on),[g,y]=(0,i.useState)(null),{filtersPickedByUserRef:x,selectedFilterIds:b,resetFilterIds:S,resetAndToggleRootFilter:v,toggleFilterId:R}=function(e){const{openedFolderUri:t=it,change:r,resetFolder:a}=(0,i.useContext)(at),n=(0,i.useRef)(t),[l,o]=(0,fe.k)("ylx-active-filter-ids",{[t]:[]}),s=(0,i.useRef)(!0),c=(0,d.Y1)((function(r){let i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const a=new Set(e);a.has(r)?a.delete(r):a.add(r),s.current=i,o({...l,[t]:Array.from(a)})}),[e,o,t]),u=(0,i.useCallback)((()=>o({...l,[t]:[]})),[t,l,o]),p=(0,i.useCallback)((e=>{t&&a(),o({...l,[it]:e?[e]:[]})}),[t,a,l,o]);return(0,i.useLayoutEffect)((()=>{t!==n.current&&t!==it&&"PUSH"===r&&o({...l,[t]:l[n.current]}),n.current=t}),[r,t,l,o]),{filtersPickedByUserRef:s,selectedFilterIds:l[t],resetFilterIds:u,resetAndToggleRootFilter:p,toggleFilterId:c}}((null==g||null===(e=g.selectedFilters)||void 0===e?void 0:e.map((e=>e.id)))??[]),F=null==b?void 0:b[0],{selectedSortOrderId:E,setSelectedSortOrderId:N}=function(e){const t=(0,Ke.u)().getContentsPrimaryFilterId(A.s.PLAYLIST),{openedFolderUri:r=""}=(0,i.useContext)(at),[a,n]=(0,fe.k)("ylx-active-sort-order-by-filter-id",{}),l=`${r&&t?t:e}`;return{selectedSortOrderId:a[l],setSelectedSortOrderId:(0,i.useCallback)((e=>{n({...a,[l]:e})}),[l,a,n])}}(F),B=(0,i.useRef)(null),Y=(0,i.useRef)(null),W=(0,i.useRef)(null),{expandedFolders:H}=(0,i.useContext)(he),{openedFolderUri:K,resetFolder:G}=(0,i.useContext)(at),z=(0,ll.w)(),X=(0,O.C)(),q=(0,i.useContext)(D.g),J=(0,_.Y)(),Z=er(),[ee,te]=(0,i.useState)(!1),{isCollapsed:re,isExpanded:ie,setYlxSidebarState:ae}=(0,P.iu)();(e=>{const t=(0,i.useContext)(D.g),{isCollapsed:r,setYlxSidebarState:a,lastUncollapsedYlxSidebarState:n}=(0,P.iu)(),l=(0,I.k)();(0,i.useEffect)((()=>(w().bind(l?C.Yj.TOGGLE_NPV_SIDEBAR:C.Yj.TOGGLE_YLX_SIDEBAR,(0,T.J)((()=>{const e=r?n:P.MT.COLLAPSED;a(e)}))),()=>{w().unbind(l?C.Yj.TOGGLE_NPV_SIDEBAR:C.Yj.TOGGLE_YLX_SIDEBAR)})),[r,l,n,a]),(0,i.useEffect)((()=>(w().bind(C.Yj.GO_TO_LIBRARY,(0,T.J)((()=>{e(null),r&&a(n)}))),()=>{w().unbind(C.Yj.GO_TO_LIBRARY)})),[r,n,e,a]),(0,i.useEffect)((()=>(w().bind(C.Yj.GO_TO_PLAYLISTS,(0,T.J)((()=>{e(t.getContentsPrimaryFilterId(A.s.PLAYLIST)),r&&a(n)}))),()=>{w().unbind(C.Yj.GO_TO_PLAYLISTS)})),[r,n,t,e,a]),(0,i.useEffect)((()=>(w().bind(C.Yj.GO_TO_PODCASTS,(0,T.J)((()=>{e(t.getContentsPrimaryFilterId(A.s.SHOW)),r&&a(n)}))),()=>{w().unbind(C.Yj.GO_TO_PODCASTS)})),[r,n,t,e,a]),(0,i.useEffect)((()=>(w().bind(C.Yj.GO_TO_ARTISTS,(0,T.J)((()=>{e(t.getContentsPrimaryFilterId(A.s.ARTIST)),r&&a(n)}))),()=>{w().unbind(C.Yj.GO_TO_ARTISTS)})),[r,n,t,e,a]),(0,i.useEffect)((()=>(w().bind(C.Yj.GO_TO_ALBUMS,(0,T.J)((()=>{e(t.getContentsPrimaryFilterId(A.s.ALBUM)),r&&a(n)}))),()=>{w().unbind(C.Yj.GO_TO_ALBUMS)})),[r,n,t,e,a]),(0,i.useEffect)((()=>(w().bind(C.Yj.GO_TO_AUDIOBOOKS,(0,T.J)((()=>{e(t.getContentsPrimaryFilterId(A.s.AUDIOBOOK)),r&&a(n)}))),()=>{w().unbind(C.Yj.GO_TO_AUDIOBOOKS)})),[r,n,t,e,a])})(v);const{isGridView:ne}=(0,Ea.y)(),{libraryRowMode:le}=gn(),oe=le===pn.COMPACT,{spec:de,UBIFragment:ce}=(0,V.gp)(u.I,{data:{identifier:"yourlibraryx"}});let ue;ue=re?"collapsed":ne?ie?"expanded_grid":"default_grid":oe?ie?"expanded_compact":"default_compact":ie?"expanded_list":"default_list";const pe=(0,i.useMemo)((()=>de.sidebarFactory({uri:K??it,identifier:ue})),[de,K,ue]),ye=(0,V.K2)(pe),me=(0,i.useMemo)((()=>pe.headerFactory()),[pe]),xe=(0,i.useMemo)((()=>me.filtersFactory()),[me]),Se=(0,i.useMemo)((()=>me.searchBarFactory()),[me]),ve=(0,i.useMemo)((()=>pe.listFactory()),[pe]),we=(0,V.Mk)();!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0;const a=(0,ol.O)(),n=(0,i.useContext)(D.g).getContentsPrimaryFilterId("downloaded"),l=(0,i.useRef)(e);l.current=e;const o=(0,i.useRef)(t);o.current=t;const s=(0,i.useRef)(r);s.current=r;const c=(0,i.useRef)(!1);(0,i.useEffect)((()=>{if(!n)return;const e=o.current.includes(n),t=l.current.includes(n),r=o.current.length>1,i=!a&&!r&&!e&&t,d=a&&e&&c.current;(i||d)&&(i&&(c.current=!0),s.current(n,!1))}),[n,a]);const u=(0,i.useRef)(t);(0,d.c5)((()=>{n&&(t.includes(n)&&!u.current.includes(n)&&c.current||(c.current=!1),u.current=t)}),[n,t])}(null==g||null===(t=g.availableFilters)||void 0===t?void 0:t.map((e=>e.id)),null==g||null===(r=g.selectedFilters)||void 0===r?void 0:r.map((e=>e.id)),R);const{handleDropOnFolder:Ce,unpinConfirmationDialog:Te}=mi(ve,K),{dropOriginIsYLX:Pe,entityIsInFolder:Ie}=$t(),{setDraggingIsInProgress:De}=(0,i.useContext)(Zt.gT);(0,Gn.o)(B);const Ae=K?Ol:Ll,je=!Ie||null!=g&&g.reorderAllowed?[]:[Kt.__.PLAYLISTS_V2,Kt.__.FOLDERS],{dropPosition:Le,className:Oe,..._e}=(0,Ge.eE)({allowedMimeTypesByDropPosition:{[Ge.Ab.ON]:Pe?je:Ae},onDrop:(0,i.useCallback)((async e=>{if(K)Ce(e);else{const{[Kt.__.TRACKS]:t=[],[Kt.__.LOCAL_TRACKS]:r=[],[Kt.__.ALBUMS]:i,[Kt.__.ARTISTS]:a,[Kt.__.EPISODES]:n,[Kt.__.SHOWS]:l,[Kt.__.PLAYLISTS_V2]:o=[],[Kt.__.FOLDERS]:s}=e,d=[...t,...r];d.length&&(null==q||q.add({uris:d}),we.logInteraction(ve.dragCreatePlaylist())),null!=i&&i.length&&(null==q||q.add({uris:i}),we.logInteraction(ve.dragLike({itemToBeLiked:i.at(0)??""}))),null!=a&&a.length&&(null==q||q.add({uris:a}),we.logInteraction(ve.dragLike({itemToBeLiked:a.at(0)??""}))),null!=n&&n.length&&(null==q||q.add({uris:n}),we.logInteraction(ve.dragLike({itemToBeLiked:n.at(0)??""}))),null!=l&&l.length&&(null==q||q.add({uris:l}),we.logInteraction(ve.dragLike({itemToBeLiked:l.at(0)??""}))),o.length&&(Z(o,{before:"start"}),Pe?we.logInteraction(ve.dragSort()):we.logInteraction(ve.dragLike({itemToBeLiked:o.at(0)??""}))),null!=s&&s.length&&(J.moveFolder({uri:s[0]},{before:"start"}),we.logInteraction(ve.dragSort()))}}),[K,Ce,q,we,ve,Z,Pe,J]),onLongDragOver:(0,i.useCallback)((()=>{re&&ae(P.MT.DEFAULT)}),[re,ae])}),ke=(0,i.useMemo)((()=>({filters:b,sortOrder:E,textFilter:o,includeLocalFiles:X,includeYourEpisodes:!0,includeLikedSongs:!0,expandedFolders:re||ne?[]:H,filtersPickedByUser:x.current,folderUri:K})),[H,x,X,ne,re,K,b,E,o]),Re=(0,i.useCallback)((async(e,t)=>{try{const r=await q.getContents({offset:e,limit:t,...ke}),{offset:i,limit:a,items:n,...o}=r;return te(!1),{fetchedId:ke.folderUri,onCacheSuccess:()=>{y((e=>(0,l.Q)(o,e)?e:o))},...r}}catch(r){return r instanceof m.oJ?(S(),Al):r instanceof m.wS?(N(void 0),Al):r instanceof m.im?(G(),Al):((0,k.W8)(r),te(!0),Al)}}),[ke,q,S,G,N]),Fe=!1===(null==g?void 0:g.hasUnfilteredItems),Ee=(null==g?void 0:g.hasTextFilter)&&0===g.totalLength&&""!==o,{setFilter:Me}=(0,i.useContext)(rt.on);(0,i.useEffect)((()=>{Ee&&re&&Me("")}),[Ee,re,Me]);const Ne=0===(null==g?void 0:g.totalLength)&&g.selectedFilters.length>0&&!g.passedFolderUri&&!g.hasTextFilter;(0,d.c5)((()=>{const e=null==g?void 0:g.selectedFilters.at(-1);Ne&&e&&R(e.id,!1)}),[Ne,null==g?void 0:g.selectedFilters]);const Be=(0,c.IP)(sa.EvA,{loadingValue:!1})&&(null==q?void 0:q.getCapabilities().canFetchAllItems),{fetchedId:Ve,getItems:Ye,nrValidItems:We,invalidateCache:He}=(0,L.W)({nrItems:50,fetch:Re,limit:50,cacheAllOnInvalidation:Be,cacheAllLimit:jl}),Xe=(0,s.yK)(He,200,{leading:!0,trailing:!0,maxWait:1e3});ml(null==g?void 0:g.primaryFilter,Xe);const qe=!K&&!Ve||K===Ve;!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const r=(0,i.useRef)({});(0,i.useLayoutEffect)((()=>{if(!e.current)return()=>{};const i=e.current,a=r.current[t];i.scrollTop=a??0;const n=()=>{r.current[t]=i.scrollTop};return null==i||i.addEventListener("scroll",n),()=>{null==i||i.removeEventListener("scroll",n)}}),[e,t])}(B,Ve);const Qe=(0,i.useCallback)((()=>{He(),te(!1)}),[He]),Je=(0,Nn.K)(B),Ze=!(null==g||!g.openedFolderName),$e=(0,c.IP)(sa.UxD,{loadingValue:!1})&&Be,et=function(e,t,r){const{isGridView:a}=(0,Ea.y)(),{rowHeight:n}=gn();return(0,i.useCallback)((async i=>{let l=n,o=1;if(a){var s;const t=null===(s=e.current)||void 0===s?void 0:s.querySelector('li[role="row"]');l=(null==t?void 0:t.getBoundingClientRect().height)??0,null!=t&&t.parentElement&&(o=getComputedStyle(t.parentElement).getPropertyValue("grid-template-columns").split(" ").length)}if(!l)return null;const d=r(0,jl,{cachedOnly:!0}),c=d.find((e=>(null==e?void 0:e.name)&&(0,sl.w)(i,e.name))),u=c?d.indexOf(c):-1;return-1!==u&&t.current&&function(e,t,r,i){if(!e)return;const{scrollTop:a,offsetHeight:n}=e,l=t&&e?t.getBoundingClientRect().top+a-e.getBoundingClientRect().top:0;if(l+r<a||l+r+i>a+n){const t=r-n/2+l+i/2;e.scrollTop=t}}(t.current,e.current,Math.floor(u/o)*l,l),(null==c?void 0:c.uri)??null}),[e,t,n,r,a])}(W,B,Ye),nt=ee?(0,h.jsx)(be,{onClick:Qe}):null;let lt;(0,i.useEffect)((()=>{ee&&re&&ae(P.MT.DEFAULT)}),[ee,re,ae]),Fe&&!re&&(lt=Ze?(0,h.jsx)($,{className:Oe}):(0,h.jsx)(se,{className:Oe}));const ot=Ee?(0,h.jsx)(ge,{query:o,className:Oe}):null,st=(0,c.IP)(sa.WIf),dt=!re&&!lt&&(0,h.jsxs)("div",{className:n()(hl,Oe,{[fl]:st}),children:[(0,h.jsx)(Hn,{clearOnEscapeInElementRef:Y,primaryFilter:null==g?void 0:g.primaryFilter,spec:Se},K),(0,h.jsx)(Vn,{sortOrders:(null==g?void 0:g.availableSortOrders)??[],activeSortOrderId:null==g||null===(a=g.selectedSortOrder)||void 0===a?void 0:a.id,setActiveSortOrderId:N,root:Y.current,showReorderingOnboarding:(null==g?void 0:g.primaryFilter)===A.s.PLAYLIST&&!(null!=g&&g.reorderAllowed),spec:me,scrollNodeRef:B})]}),ct=ee&&!g,ut=ie&&!ne&&!nt&&!lt;return(0,h.jsx)(M,{containerRef:Y,findMatchingTypeaheadUid:et,isEnabled:$e,children:(0,h.jsxs)(ce,{spec:de,children:[(0,h.jsx)(nl,{}),(0,h.jsx)(p.UF,{menu:(0,h.jsx)(f,{folderUri:K}),children:(0,h.jsxs)("div",{className:n()(bl,{[ze]:Le===Ge.Ab.ON,[wl]:re}),ref:e=>{Y.current=e,ye(e)},..._e,tabIndex:-1,onDragStart:()=>De(!0),onDragEnd:()=>De(!1),children:[Te,(0,h.jsxs)("div",{className:n()({[Il]:Je}),children:[(0,h.jsx)(en,{parentDropTargetClassName:Oe,isLibraryCompletelyEmpty:Fe,folderUri:null==g?void 0:g.passedFolderUri,folderName:null==g?void 0:g.openedFolderName,spec:me.titleRowFactory()}),!z&&(0,h.jsx)(Q,{spec:me}),!re&&!ct&&(0,h.jsxs)("div",{className:Dl,children:[(0,h.jsx)(tt,{selectedFilters:null==g?void 0:g.selectedFilters,availableFilters:null==g?void 0:g.availableFilters,toggleFilterId:R,resetFilterIds:S,className:n()(Tl,{[Pl]:!qe}),scrollNodeRef:B,spec:xe},Ve),ie&&dt]}),ut&&(0,h.jsx)(Ue,{isScrolled:Je})]}),(0,h.jsx)(Kn.G,{className:Sl,ref:e=>{e&&!B.current&&(B.current=e.osInstance().getElements().viewport)},children:(0,h.jsx)(j.A,{containerRef:Y,children:(0,h.jsxs)("div",{className:n()(vl,{[Pl]:!ee&&!qe,[wl]:re,[Cl]:ut}),children:[!ie&&dt,nt||lt||ot,(0,h.jsx)("div",{ref:W,children:ne?(0,h.jsx)(ga,{getItems:Ye,scrollNodeRef:B,primaryFilter:null==g?void 0:g.primaryFilter,nrValidItems:We,spec:ve}):(0,h.jsx)(mn,{getItems:Ye,scrollNodeRef:B,primaryFilter:null==g?void 0:g.primaryFilter,nrValidItems:We,spec:ve})})]})})}),cl(),(0,h.jsx)(U,{})]})})]})})},kl=()=>{const{isAnonymous:e}=(0,o.w1)((e=>e.session));return(0,h.jsx)(S.a,{onError:e=>{(0,k.gh)(e,"YourLibraryX")},children:(0,h.jsx)(rt.WC,{uri:m.k1,children:(0,h.jsx)(Se,{children:(0,h.jsxs)(nt,{children:[(0,h.jsx)(_l,{}),(0,h.jsx)(oe.cj,{isAnonymous:e})]})})})})}},35132:(e,t,r)=>{r.d(t,{C:()=>a});var i=r(25336);function a(){return(0,i.k)()[0]}}}]);
//# sourceMappingURL=3804.cb67f5ed.js.map